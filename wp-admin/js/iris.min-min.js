!function(i,r){function t(){var r,t,e="backgroundImage";c?h="filter":(r=i('<div id="iris-gradtest" />'),t="linear-gradient(top,#fff,#000)",i.each(p,function(i,s){if(r.css(e,s+t),r.css(e).match("gradient"))return h=i,!1}),!1===h&&(r.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),r.css(e).match("gradient")&&(h="webkit")),r.remove())}function e(r,t){return r="top"===r?"top":"left",t=i.isArray(t)?t:Array.prototype.slice.call(arguments,1),"webkit"===h?o(r,t):p[h]+"linear-gradient("+r+", "+t.join(", ")+")"}function s(r,t){var e,s,o,a,l,c,h,p,u;r="top"===r?"top":"left",t=i.isArray(t)?t:Array.prototype.slice.call(arguments,1),e="top"===r?0:1,s=i(this),o=t.length-1,p='<div class="iris-ie-gradient-shim" style="position:absolute;'+(h=1===e?"height":"width")+":100%;"+(l=1===e?"left":"top")+":%start%;"+(c=1===e?"right":"bottom")+":%end%;"+(a="filter")+':%filter%;" data-color:"%color%"></div>',u="","static"===s.css("position")&&s.css({position:"relative"}),t=n(t),i.each(t,function(i,r){var s,n,a;return i!==o&&(s=t[i+1],void(r.stop!==s.stop&&(n=100-parseFloat(s.stop)+"%",r.octoHex=new Color(r.color).toIEOctoHex(),s.octoHex=new Color(s.color).toIEOctoHex(),a="progid:DXImageTransform.Microsoft.Gradient(GradientType="+e+", StartColorStr='"+r.octoHex+"', EndColorStr='"+s.octoHex+"')",u+=p.replace("%start%",r.stop).replace("%end%",n).replace("%filter%",a))))}),s.find(".iris-ie-gradient-shim").remove(),i(u).prependTo(s)}function o(r,t){var e=[];return r="top"===r?"0% 0%,0% 100%,":"0% 100%,100% 100%,",t=n(t),i.each(t,function(i,r){e.push("color-stop("+parseFloat(r.stop)/100+", "+r.color+")")}),"-webkit-gradient(linear,"+r+e.join(",")+")"}function n(r){var t=[],e=[],s=[],o=r.length-1;return i.each(r,function(i,r){var s=r,o=!1,n=r.match(/1?[0-9]{1,2}%$/);n&&(s=r.replace(/\s?1?[0-9]{1,2}%$/,""),o=n.shift()),t.push(s),e.push(o)}),!1===e[0]&&(e[0]="0%"),!1===e[o]&&(e[o]="100%"),e=a(e),i.each(e,function(i){s[i]={color:t[i],stop:e[i]}}),s}function a(r){var t,e,s,o,n=0,l=r.length-1,c=0,h=!1;if(r.length<=2||i.inArray(!1,r)<0)return r;for(;c<r.length-1;)h||!1!==r[c]?h&&!1!==r[c]&&(l=c,c=r.length):(n=c-1,h=!0),c++;for(e=l-n,o=parseInt(r[n].replace("%"),10),t=(parseFloat(r[l].replace("%"))-o)/e,c=n+1,s=1;c<l;)r[c]=o+s*t+"%",s++,c++;return a(r)}var l,c,h,p,u,d,f,g,v;l='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',u='.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-only-strip .iris-slider{width:100%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-only-strip .iris-square{display:none}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0 0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0 0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip-horiz .iris-strip .ui-slider-handle{right:auto;left:auto;bottom:-3px;top:-3px;height:auto;width:6px;cursor:ew-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-strip-horiz .iris-slider-offset{top:0;bottom:0;right:11px;left:-3px}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}',f=navigator.userAgent.toLowerCase(),g="Microsoft Internet Explorer"===navigator.appName,v=g?parseFloat(f.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,h=!1,p=["-moz-","-webkit-","-o-","-ms-"],(c=g&&v<10)&&v<=7?(i.fn.iris=i.noop,i.support.iris=!1):(i.support.iris=!0,i.fn.gradient=function(){var r=arguments;return this.each(function(){c?s.apply(this,r):i(this).css("backgroundImage",e.apply(this,r))})},i.fn.rainbowGradient=function(r,t){var e,s,o,n;for(r=r||"top",s="hsl(%h%,"+(e=i.extend({},{s:100,l:50},t)).s+"%,"+e.l+"%)",o=0,n=[];o<=360;)n.push(s.replace("%h%",o)),o+=30;return this.each(function(){i(this).gradient(r,n)})},d={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1,type:"full",slider:"horizontal"},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var r=this,e=r.element,s=r.options.color||e.val();!1===h&&t(),e.is("input")?(r.options.target?r.picker=i(l).appendTo(r.options.target):r.picker=i(l).insertAfter(e),r._addInputListeners(e)):(e.append(l),r.picker=e.find(".iris-picker")),g?9===v?r.picker.addClass("iris-ie-9"):v<=8&&r.picker.addClass("iris-ie-lt9"):f.indexOf("compatible")<0&&f.indexOf("khtml")<0&&f.match(/mozilla/)&&r.picker.addClass("iris-mozilla"),r.options.palettes&&r._addPalettes(),r.onlySlider="hue"===r.options.type,r.horizontalSlider=r.onlySlider&&"horizontal"===r.options.slider,r.onlySlider&&(r.options.controls.strip="h",s||(s="hsl(10,100,50)")),r._color=new Color(s).setHSpace(r.options.mode),r.options.color=r._color.toString(),r.controls={square:r.picker.find(".iris-square"),squareDrag:r.picker.find(".iris-square-value"),horiz:r.picker.find(".iris-square-horiz"),vert:r.picker.find(".iris-square-vert"),strip:r.picker.find(".iris-strip"),stripSlider:r.picker.find(".iris-strip .iris-slider-offset")},"hsv"===r.options.mode&&r._has("l",r.options.controls)?r.options.controls=r._defaultHSVControls:"hsl"===r.options.mode&&r._has("v",r.options.controls)&&(r.options.controls=r._defaultHSLControls),r.hue=r._color.h(),r.options.hide&&r.picker.hide(),r.options.border&&!r.onlySlider&&r.picker.addClass("iris-border"),r._initControls(),r.active="external",r._dimensions(),r._change()},_has:function(r,t){var e=!1;return i.each(t,function(i,t){if(r===t)return e=!0,!1}),e},_addPalettes:function(){var r=i('<div class="iris-palette-container" />'),t=i('<a class="iris-palette" tabindex="0" />'),e=i.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(r=this.picker.find(".iris-palette-container").detach().html("")),i.each(e,function(i,e){t.clone().data("color",e).css("backgroundColor",e).appendTo(r).height(10).width(10)}),this.picker.append(r)},_paint:function(){var i=this;i.horizontalSlider?i._paintDimension("left","strip"):i._paintDimension("top","strip"),i._paintDimension("top","vert"),i._paintDimension("left","horiz")},_paintDimension:function(i,r){var t,e=this,s=e._color,o=e.options.mode,n=e._getHSpaceColor(),a=e.controls[r],l=e.options.controls;if(r!==e.active&&("square"!==e.active||"strip"===r))switch(l[r]){case"h":if("hsv"===o){switch(n=s.clone(),r){case"horiz":n[l.vert](100);break;case"vert":n[l.horiz](100);break;case"strip":n.setHSpace("hsl")}t=n.toHsl()}else t="strip"===r?{s:n.s,l:n.l}:{s:100,l:n.l};a.rainbowGradient(i,t);break;case"s":"hsv"===o?"vert"===r?t=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===r?t=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===r&&(t=["#fff","hsl("+n.h+",100%,50%)"]):t="vert"===r&&"h"===e.options.controls.horiz?["hsla(0, 0%, "+n.l+"%, 0)","hsla(0, 0%, "+n.l+"%, 1)"]:["hsl("+n.h+",0%,50%)","hsl("+n.h+",100%,50%)"],a.gradient(i,t);break;case"l":t="strip"===r?["hsl("+n.h+",100%,100%)","hsl("+n.h+", "+n.s+"%,50%)","hsl("+n.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],a.gradient(i,t);break;case"v":t="strip"===r?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],a.gradient(i,t)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_stripOnlyDimensions:function(){var i=this,r=this.options.width,t=.12*r;i.horizontalSlider?i.picker.css({width:r,height:t}).addClass("iris-only-strip iris-strip-horiz"):i.picker.css({width:t,height:r}).addClass("iris-only-strip iris-strip-vert")},_dimensions:function(r){if("hue"===this.options.type)return this._stripOnlyDimensions();var t,e,s,o,n=this,a=n.options,l,c=n.controls.square,h=n.picker.find(".iris-strip"),p="77.5%",u="12%",d=20,f=a.border?a.width-d:a.width,g=i.isArray(a.palettes)?a.palettes.length:n._palettes.length;return r&&(c.css("width",""),h.css("width",""),n.picker.css({width:"",height:""})),p=f*(parseFloat(p)/100),u=f*(parseFloat(u)/100),t=a.border?p+d:p,c.width(p).height(p),h.height(p).width(u),n.picker.css({width:a.width,height:t}),a.palettes?(s=(o=p-(g-1)*(e=2*p/100))/g,n.picker.find(".iris-palette").each(function(r){var t=0===r?0:e;i(this).css({width:s,height:s,marginLeft:t})}),n.picker.css("paddingBottom",s+e),void h.height(s+e+p)):n.picker.css("paddingBottom","")},_addInputListeners:function(i){var r=this,t=100,e=function(t){var e=new Color(i.val()),s=i.val().replace(/^#/,"");i.removeClass("iris-error"),e.error?""!==s&&i.addClass("iris-error"):e.toString()!==r._color.toString()&&("keyup"===t.type&&s.match(/^[0-9a-fA-F]{3}$/)||r._setOption("color",e.toString()))};i.on("change",e).on("keyup",r._debounce(e,t)),r.options.hide&&i.one("focus",function(){r.show()})},_initControls:function(){var r=this,t=r.controls,e=t.square,s=r.options.controls,o=r._scale[s.strip],n=r.horizontalSlider?"horizontal":"vertical";t.stripSlider.slider({orientation:n,max:o,slide:function(i,t){r.active="strip","h"===s.strip&&"vertical"===n&&(t.value=o-t.value),r._color[s.strip](t.value),r._change.apply(r,arguments)}}),t.squareDrag.draggable({containment:t.square.find(".iris-square-inner"),zIndex:1e3,cursor:"move",drag:function(i,t){r._squareDrag(i,t)},start:function(){e.addClass("iris-dragging"),i(this).addClass("ui-state-focus")},stop:function(){e.removeClass("iris-dragging"),i(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(t){var e="ui-state-focus";t.preventDefault(),"mousedown"===t.type?(r.picker.find("."+e).removeClass(e).blur(),i(this).addClass(e).focus()):i(this).removeClass(e)}).on("keydown",function(i){var e=t.square,s=t.squareDrag,o=s.position(),n=r.options.width/100;switch(i.altKey&&(n*=10),i.keyCode){case 37:o.left-=n;break;case 38:o.top-=n;break;case 39:o.left+=n;break;case 40:o.top+=n;break;default:return!0}o.left=Math.max(0,Math.min(o.left,e.width())),o.top=Math.max(0,Math.min(o.top,e.height())),s.css(o),r._squareDrag(i,{position:o}),i.preventDefault()}),e.mousedown(function(t){var e,s;1===t.which&&i(t.target).is("div")&&(e=r.controls.square.offset(),s={top:t.pageY-e.top,left:t.pageX-e.left},t.preventDefault(),r._squareDrag(t,{position:s}),t.target=r.controls.squareDrag.get(0),r.controls.squareDrag.css(s).trigger(t))}),r.options.palettes&&r._paletteListeners()},_paletteListeners:function(){var r=this;r.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){r._color.fromCSS(i(this).data("color")),r.active="external",r._change()}).on("keydown.palette",".iris-palette",function(r){return 13!==r.keyCode&&32!==r.keyCode||(r.stopPropagation(),void i(this).click())})},_squareDrag:function(i,r){var t=this,e=t.options.controls,s=t._squareDimensions(),o=Math.round((s.h-r.position.top)/s.h*t._scale[e.vert]),n=t._scale[e.horiz]-Math.round((s.w-r.position.left)/s.w*t._scale[e.horiz]);t._color[e.horiz](n)[e.vert](o),t.active="square",t._change.apply(t,arguments)},_setOption:function(r,t){var e,s,o,n=this,a=n.options[r],l=!1;switch(n.options[r]=t,r){case"color":n.onlySlider?(t=parseInt(t,10),t=isNaN(t)||t<0||t>359?a:"hsl("+t+",100,50)",n.options.color=n.options[r]=t,n._color=new Color(t).setHSpace(n.options.mode),n.active="external",n._change()):(e=(t=""+t).replace(/^#/,""),(s=new Color(t).setHSpace(n.options.mode)).error?n.options[r]=a:(n._color=s,n.options.color=n.options[r]=n._color.toString(),n.active="external",n._change()));break;case"palettes":l=!0,t?n._addPalettes():n.picker.find(".iris-palette-container").remove(),a||n._paletteListeners();break;case"width":l=!0;break;case"border":l=!0,o=t?"addClass":"removeClass",n.picker[o]("iris-border");break;case"mode":case"controls":if(a===t)return;return o=n.element,(a=n.options).hide=!n.picker.is(":visible"),n.destroy(),n.picker.remove(),i(n.element).iris(a)}l&&n._dimensions(!0)},_squareDimensions:function(i){var t,e,s=this.controls.square;return i!==r&&s.data("dimensions")?s.data("dimensions"):(e=this.controls.squareDrag,t={w:s.width(),h:s.height()},s.data("dimensions",t),t)},_isNonHueControl:function(i,r){return"square"===i&&"h"===this.options.controls.strip||"external"!==r&&("h"!==r||"strip"!==i)},_change:function(){var r=this,t=r.controls,e=r._getHSpaceColor(),s=["square","strip"],o=r.options.controls,n=o[r.active]||"external",a=r.hue;"strip"===r.active?s=[]:"external"!==r.active&&s.pop(),i.each(s,function(i,s){var n,a,l;if(s!==r.active)switch(s){case"strip":n="h"!==o.strip||r.horizontalSlider?e[o.strip]:r._scale[o.strip]-e[o.strip],t.stripSlider.slider("value",n);break;case"square":a=r._squareDimensions(),l={left:e[o.horiz]/r._scale[o.horiz]*a.w,top:a.h-e[o.vert]/r._scale[o.vert]*a.h},r.controls.squareDrag.css(l)}}),e.h!==a&&r._isNonHueControl(r.active,n)&&r._color.h(a),r.hue=r._color.h(),r.options.color=r._color.toString(),r._inited&&r._trigger("change",{type:r.active},{color:r._color}),r.element.is(":input")&&!r._color.error&&(r.element.removeClass("iris-error"),r.onlySlider?r.element.val()!==r.hue&&r.element.val(r.hue):r.element.val()!==r._color.toString()&&r.element.val(r._color.toString())),r._paint(),r._inited=!0,r.active=!1},_debounce:function(i,r,t){var e,s;return function(){var o,n,a=this,l=arguments;return o=function(){e=null,t||(s=i.apply(a,l))},n=t&&!e,clearTimeout(e),e=setTimeout(o,r),n&&(s=i.apply(a,l)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(i){return!0===i?this._color.clone():i===r?this._color.toString():void this.option("color",i)}},i.widget("a8c.iris",d),i('<style id="iris-css">'+u+"</style>").appendTo("head"))}(jQuery),function(i,r){var t=function(i,r){return this instanceof t?this._init(i,r):new t(i,r)};t.fn=t.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(i){var t="noop";switch(typeof i){case"object":return i.a!==r&&this.a(i.a),this[t=i.r!==r?"fromRgb":i.l!==r?"fromHsl":i.v!==r?"fromHsv":t](i);case"string":return this.fromCSS(i);case"number":return this.fromInt(parseInt(i,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var i=new t(this.toInt()),r=["_alpha","_hSpace","_hsl","_hsv","error"],e=r.length-1;e>=0;e--)i[r[e]]=this[r[e]];return i},setHSpace:function(i){return this._hSpace="hsv"===i?i:"hsl",this},noop:function(){return this},fromCSS:function(i){var r,t=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,(i=i.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"")).match(t)&&i.match(/\)$/)){if((r=i.replace(/(\s|%)/g,"").replace(t,"").replace(/,?\);?$/,"").split(",")).length<3)return this._error();if(4===r.length&&(this.a(parseFloat(r.pop())),this.error))return this;for(var e=r.length-1;e>=0;e--)if(r[e]=parseInt(r[e],10),isNaN(r[e]))return this._error();return i.match(/^rgb/)?this.fromRgb({r:r[0],g:r[1],b:r[2]}):i.match(/^hsv/)?this.fromHsv({h:r[0],s:r[1],v:r[2]}):this.fromHsl({h:r[0],s:r[1],l:r[2]})}return this.fromHex(i)},fromRgb:function(i,t){return"object"!=typeof i||i.r===r||i.g===r||i.b===r?this._error():(this.error=!1,this.fromInt(parseInt((i.r<<16)+(i.g<<8)+i.b,10),t))},fromHex:function(i){return 3===(i=i.replace(/^#/,"").replace(/^0x/,"")).length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),this.error=!/^[0-9A-F]{6}$/i.test(i),this.fromInt(parseInt(i,16))},fromHsl:function(i){var t,e,s,o,n,a,l,c;return"object"!=typeof i||i.h===r||i.s===r||i.l===r?this._error():(this._hsl=i,this._hSpace="hsl",a=i.h/360,l=i.s/100,c=i.l/100,0===l?t=e=s=c:(n=2*c-(o=c<.5?c*(1+l):c+l-c*l),t=this.hue2rgb(n,o,a+1/3),e=this.hue2rgb(n,o,a),s=this.hue2rgb(n,o,a-1/3)),this.fromRgb({r:255*t,g:255*e,b:255*s},!0))},fromHsv:function(i){var t,e,s,o,n,a,l,c,h,p,u;if("object"!=typeof i||i.h===r||i.s===r||i.v===r)return this._error();switch(this._hsv=i,this._hSpace="hsv",t=i.h/360,e=i.s/100,h=(s=i.v/100)*(1-e),p=s*(1-(c=6*t-(l=Math.floor(6*t)))*e),u=s*(1-(1-c)*e),l%6){case 0:o=s,n=u,a=h;break;case 1:o=p,n=s,a=h;break;case 2:o=h,n=s,a=u;break;case 3:o=h,n=p,a=s;break;case 4:o=u,n=h,a=s;break;case 5:o=s,n=h,a=p}return this.fromRgb({r:255*o,g:255*n,b:255*a},!0)},fromInt:function(i,t){return this._color=parseInt(i,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),t===r&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(i,r,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(r-i)*t:t<.5?r:t<2/3?i+(r-i)*(2/3-t)*6:i},toString:function(){var i=parseInt(this._color,10).toString(16);if(this.error)return"";if(i.length<6)for(var r=6-i.length-1;r>=0;r--)i="0"+i;return"#"+i},toCSS:function(i,r){switch(i=i||"hex",r=parseFloat(r||this._alpha),i){case"rgb":case"rgba":var t=this.toRgb();return r<1?"rgba( "+t.r+", "+t.g+", "+t.b+", "+r+" )":"rgb( "+t.r+", "+t.g+", "+t.b+" )";case"hsl":case"hsla":var e=this.toHsl();return r<1?"hsla( "+e.h+", "+e.s+"%, "+e.l+"%, "+r+" )":"hsl( "+e.h+", "+e.s+"%, "+e.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var i,r,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,n=Math.max(e,s,o),a=Math.min(e,s,o),l=(n+a)/2;if(n===a)i=r=0;else{var c=n-a;switch(r=l>.5?c/(2-n-a):c/(n+a),n){case e:i=(s-o)/c+(s<o?6:0);break;case s:i=(o-e)/c+2;break;case o:i=(e-s)/c+4}i/=6}return 0===(i=Math.round(360*i))&&this._hsl.h!==i&&(i=this._hsl.h),0===(r=Math.round(100*r))&&this._hsl.s&&(r=this._hsl.s),{h:i,s:r,l:Math.round(100*l)}},toHsv:function(){var i,r,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,n=Math.max(e,s,o),a=Math.min(e,s,o),l=n,c=n-a;if(r=0===n?0:c/n,n===a)i=r=0;else{switch(n){case e:i=(s-o)/c+(s<o?6:0);break;case s:i=(o-e)/c+2;break;case o:i=(e-s)/c+4}i/=6}return 0===(i=Math.round(360*i))&&this._hsv.h!==i&&(i=this._hsv.h),0===(r=Math.round(100*r))&&this._hsv.s&&(r=this._hsv.s),{h:i,s:r,v:Math.round(100*l)}},toInt:function(){return this._color},toIEOctoHex:function(){var i=this.toString(),r=parseInt(255*this._alpha,10).toString(16);return 1===r.length&&(r="0"+r),"#"+r+i.replace(/^#/,"")},toLuminosity:function(){var i=this.toRgb(),r={};for(var t in i)if(i.hasOwnProperty(t)){var e=i[t]/255;r[t]=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*r.r+.7152*r.g+.0722*r.b},getDistanceLuminosityFrom:function(i){if(!(i instanceof t))throw"getDistanceLuminosityFrom requires a Color object";var r=this.toLuminosity(),e=i.toLuminosity();return r>e?(r+.05)/(e+.05):(e+.05)/(r+.05)},getMaxContrastColor:function(){var i=this.getDistanceLuminosityFrom(new t("#000")),r=this.getDistanceLuminosityFrom(new t("#fff")),e;return new t(i>=r?"#000":"#fff")},getReadableContrastingColor:function(i,e){if(!(i instanceof t))return this;var s,o,n,a=e===r?5:e,l=i.getDistanceLuminosityFrom(this);if(l>=a)return this;if((o=(s=i.getMaxContrastColor()).getDistanceLuminosityFrom(i))<=a)return s;for(n=0===s.toInt()?-1:1;l<a&&(this.l(n,!0),l=this.getDistanceLuminosityFrom(i),0!==this._color&&16777215!==this._color););return this},a:function(i){if(i===r)return this._alpha;var t=parseFloat(i);return isNaN(t)?this._error():(this._alpha=t,this)},darken:function(i){return i=i||5,this.l(-i,!0)},lighten:function(i){return i=i||5,this.l(i,!0)},saturate:function(i){return i=i||15,this.s(i,!0)},desaturate:function(i){return i=i||15,this.s(-i,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(i){var r=180+30*(i=i||1);return this.h(r,!0)},getAnalog:function(i){var r=30*(i=i||1);return this.h(r,!0)},getTetrad:function(i){var r=60*(i=i||1);return this.h(r,!0)},getTriad:function(i){var r=120*(i=i||1);return this.h(r,!0)},_partial:function(i){var t=e[i];return function(e,s){var o=this._spaceFunc("to",t.space);return e===r?o[i]:(!0===s&&(e=o[i]+e),t.mod&&(e%=t.mod),t.range&&(e=e<t.range[0]?t.range[0]:e>t.range[1]?t.range[1]:e),o[i]=e,this._spaceFunc("from",t.space,o))}},_spaceFunc:function(i,r,t){var e=r||this._hSpace,s;return this[i+e.charAt(0).toUpperCase()+e.substr(1)](t)}};var e={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in e)e.hasOwnProperty(s)&&(t.fn[s]=t.fn._partial(s));"object"==typeof exports?module.exports=t:i.Color=t}(this);