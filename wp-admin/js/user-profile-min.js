!function($){function e(){if("function"!=typeof zxcvbn)return void setTimeout(e,50);p.val()?(i(),o()):(p.val(p.data("pw")),p.trigger("pwupdate"),o()),1!==parseInt(w.data("start-masked"),10)?d.addClass("show-password"):w.trigger("click"),$("#pw-weak-text-label").html(userProfileL10n.warnWeak)}function s(){b=p.val(),d=p.parent(),c=$('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(p[0].className).data("pw",p.data("pw")).val(p.val()).on(k,function(){c.val()!==b&&(h.val(c.val()),p.val(c.val()).trigger("pwupdate"),b=c.val())}),p.after(c),1===parseInt(p.data("reveal"),10)&&e(),p.on(k+" pwupdate",function(){p.val()!==b&&(b=p.val(),c.val()!==b&&c.val(b),p.add(c).removeClass("short bad good strong"),o())})}function a(){w.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),c.focus(),u.attr("for","pass1-text")}function t(){w=l.find(".wp-hide-pw"),w.show().on("click",function(){1===parseInt(w.data("toggle"),10)?(d.addClass("show-password"),a(),_.isUndefined(c[0].setSelectionRange)||c[0].setSelectionRange(0,100)):(d.removeClass("show-password"),w.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),p.focus(),u.attr("for","pass1"),_.isUndefined(p[0].setSelectionRange)||p[0].setSelectionRange(0,100))})}function n(){var n,i,o;l=$(".user-pass1-wrap"),u=l.find("th label").attr("for","pass1-text"),$(".user-pass2-wrap").hide(),g=$("#submit, #wp-submit").on("click",function(){r=!1}),m=g.add(" #createusersub"),f=$(".pw-weak"),v=f.find(".pw-checkbox"),v.change(function(){m.prop("disabled",!v.prop("checked"))}),p=$("#pass1"),p.length&&s(),h=$("#pass2").on(k,function(){h.val().length>0&&(p.val(h.val()),h.val(""),b="",p.trigger("pwupdate"))}),p.is(":hidden")&&(p.prop("disabled",!0),h.prop("disabled",!0),c.prop("disabled",!0)),n=l.find(".wp-pwd"),i=l.find("button.wp-generate-pw"),t(),i.length&&n.hide(),i.show(),i.on("click",function(){r=!0,i.hide(),n.show(),p.attr("disabled",!1),h.attr("disabled",!1),c.attr("disabled",!1),0===c.val().length&&e(),_.defer(function(){c.focus(),_.isUndefined(c[0].setSelectionRange)||c[0].setSelectionRange(0,100)},0)}),o=l.find("button.wp-cancel-pw"),o.on("click",function(){r=!1,c.val(""),wp.ajax.post("generate-password").done(function(e){p.data("pw",e)}),i.show(),n.hide(),f.hide(0,function(){v.removeProp("checked")}),p.prop("disabled",!0),h.prop("disabled",!0),c.prop("disabled",!0),a(),l.closest("form").is("#your-profile")&&(p.val("").trigger("pwupdate"),m.prop("disabled",!1))}),l.closest("form").on("submit",function(){r=!1,p.prop("disabled",!1),h.prop("disabled",!1),h.val(p.val()),d.removeClass("show-password")})}function i(){var e=$("#pass1").val(),s;if($("#pass-strength-result").removeClass("short bad good strong"),!e)return void $("#pass-strength-result").html("&nbsp;");switch(s=wp.passwordStrength.meter(e,wp.passwordStrength.userInputBlacklist(),e)){case-1:$("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:$("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:$("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:$("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:$("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:$("#pass-strength-result").addClass("short").html(pwsL10n.short)}}function o(){var e=$("#pass-strength-result")[0];e.className&&(p.add(c).addClass(e.className),$(e).is(".short, .bad")?(v.prop("checked")||m.prop("disabled",!0),f.show()):(m.prop("disabled",!1),f.hide()))}var r=!1,l,d,p,c,u,h,f,v,w,m,g,b,k;k="oninput"in document.createElement("input")?"input":"keyup",$(document).ready(function(){var e,s,a,t,o=$("#display_name"),r=o.val(),l=$("#wp-admin-bar-my-account").find(".display-name");$("#pass1").val("").on(k+" pwupdate",i),$("#pass-strength-result").show(),$(".color-palette").click(function(){$(this).siblings('input[name="admin_color"]').prop("checked",!0)}),o.length&&($("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var e=[],s={display_nickname:$("#nickname").val()||"",display_username:$("#user_login").val()||"",display_firstname:$("#first_name").val()||"",display_lastname:$("#last_name").val()||""};s.display_firstname&&s.display_lastname&&(s.display_firstlast=s.display_firstname+" "+s.display_lastname,s.display_lastfirst=s.display_lastname+" "+s.display_firstname),$.each($("option",o),function(s,a){e.push(a.value)}),$.each(s,function(a,t){if(t){var n=t.replace(/<\/?[a-z][^>]*>/gi,"");s[a].length&&-1===$.inArray(n,e)&&(e.push(n),$("<option />",{text:n}).appendTo(o))}})}),o.on("change",function(){if(a===t){var e=$.trim(this.value)||r;l.text(e)}})),e=$("#color-picker"),s=$("#colors-css"),a=$("input#user_id").val(),t=$('input[name="checkuser_id"]').val(),e.on("click.colorpicker",".color-option",function(){var e,n=$(this);if(!n.hasClass("selected")&&(n.siblings(".selected").removeClass("selected"),n.addClass("selected").find('input[type="radio"]').prop("checked",!0),a===t)){if(0===s.length&&(s=$('<link rel="stylesheet" />').appendTo("head")),s.attr("href",n.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{e=$.parseJSON(n.children(".icon_colors").val())}catch(e){}e&&(wp.svgPainter.setColors(e),wp.svgPainter.paint())}$.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:n.children('input[name="admin_color"]').val(),nonce:$("#color-nonce").val()}).done(function(e){e.success&&$("body").removeClass(e.data.previousScheme).addClass(e.data.currentScheme)})}}),n()}),$("#destroy-sessions").on("click",function(e){var s=$(this);wp.ajax.post("destroy-sessions",{nonce:$("#_wpnonce").val(),user_id:$("#user_id").val()}).done(function(e){s.prop("disabled",!0),s.siblings(".notice").remove(),s.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")}).fail(function(e){s.siblings(".notice").remove(),s.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")}),e.preventDefault()}),window.generatePassword=e,$(window).on("beforeunload",function(){if(!0===r)return userProfileL10n.warn})}(jQuery);