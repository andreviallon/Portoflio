!function(e){function s(){"function"==typeof zxcvbn?(c.val()?(o(),r()):(c.val(c.data("pw")),c.trigger("pwupdate"),r()),1!==parseInt(m.data("start-masked"),10)?p.addClass("show-password"):m.trigger("click"),e("#pw-weak-text-label").html(userProfileL10n.warnWeak)):setTimeout(s,50)}function a(){k=c.val(),p=c.parent(),u=e('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(c[0].className).data("pw",c.data("pw")).val(c.val()).on("input",function(){u.val()!==k&&(f.val(u.val()),c.val(u.val()).trigger("pwupdate"),k=u.val())}),c.after(u),1===parseInt(c.data("reveal"),10)&&s(),c.on("input pwupdate",function(){c.val()!==k&&(k=c.val(),u.val()!==k&&u.val(k),c.add(u).removeClass("short bad good strong"),r())})}function t(){m.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),u.focus(),h.attr("for","pass1-text")}function n(){(m=d.find(".wp-hide-pw")).show().on("click",function(){1===parseInt(m.data("toggle"),10)?(p.addClass("show-password"),t(),_.isUndefined(u[0].setSelectionRange)||u[0].setSelectionRange(0,100)):(p.removeClass("show-password"),m.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),c.focus(),h.attr("for","pass1"),_.isUndefined(c[0].setSelectionRange)||c[0].setSelectionRange(0,100))})}function i(){var i,o,r;d=e(".user-pass1-wrap"),h=d.find("th label").attr("for","pass1-text"),e(".user-pass2-wrap").hide(),b=e("#submit, #wp-submit").on("click",function(){l=!1}),g=b.add(" #createusersub"),v=e(".pw-weak"),(w=v.find(".pw-checkbox")).change(function(){g.prop("disabled",!w.prop("checked"))}),(c=e("#pass1")).length&&a(),f=e("#pass2").on("input",function(){f.val().length>0&&(c.val(f.val()),f.val(""),k="",c.trigger("pwupdate"))}),c.is(":hidden")&&(c.prop("disabled",!0),f.prop("disabled",!0),u.prop("disabled",!0)),i=d.find(".wp-pwd"),o=d.find("button.wp-generate-pw"),n(),o.length&&i.hide(),o.show(),o.on("click",function(){l=!0,o.hide(),i.show(),c.attr("disabled",!1),f.attr("disabled",!1),u.attr("disabled",!1),0===u.val().length&&s(),_.defer(function(){u.focus(),_.isUndefined(u[0].setSelectionRange)||u[0].setSelectionRange(0,100)},0)}),(r=d.find("button.wp-cancel-pw")).on("click",function(){l=!1,u.val(""),wp.ajax.post("generate-password").done(function(e){c.data("pw",e)}),o.show().focus(),i.hide(),v.hide(0,function(){w.removeProp("checked")}),c.prop("disabled",!0),f.prop("disabled",!0),u.prop("disabled",!0),t(),d.closest("form").is("#your-profile")&&(c.val("").trigger("pwupdate"),g.prop("disabled",!1))}),d.closest("form").on("submit",function(){l=!1,c.prop("disabled",!1),f.prop("disabled",!1),f.val(c.val()),p.removeClass("show-password")})}function o(){var s=e("#pass1").val(),a;if(e("#pass-strength-result").removeClass("short bad good strong"),s)switch(a=wp.passwordStrength.meter(s,wp.passwordStrength.userInputBlacklist(),s)){case-1:e("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:e("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:e("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:e("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:e("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:e("#pass-strength-result").addClass("short").html(pwsL10n.short)}else e("#pass-strength-result").html("&nbsp;")}function r(){var s=e("#pass-strength-result")[0];s.className&&(c.add(u).addClass(s.className),e(s).is(".short, .bad")?(w.prop("checked")||g.prop("disabled",!0),v.show()):(g.prop("disabled",!1),v.hide()))}var l=!1,d,p,c,u,h,f,v,w,m,g,b,k;e(document).ready(function(){var s,a,t,n,r=e("#display_name"),l=r.val(),d=e("#wp-admin-bar-my-account").find(".display-name");e("#pass1").val("").on("input pwupdate",o),e("#pass-strength-result").show(),e(".color-palette").click(function(){e(this).siblings('input[name="admin_color"]').prop("checked",!0)}),r.length&&(e("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var s=[],a={display_nickname:e("#nickname").val()||"",display_username:e("#user_login").val()||"",display_firstname:e("#first_name").val()||"",display_lastname:e("#last_name").val()||""};a.display_firstname&&a.display_lastname&&(a.display_firstlast=a.display_firstname+" "+a.display_lastname,a.display_lastfirst=a.display_lastname+" "+a.display_firstname),e.each(e("option",r),function(e,a){s.push(a.value)}),e.each(a,function(t,n){if(n){var i=n.replace(/<\/?[a-z][^>]*>/gi,"");a[t].length&&-1===e.inArray(i,s)&&(s.push(i),e("<option />",{text:i}).appendTo(r))}})}),r.on("change",function(){if(t===n){var s=e.trim(this.value)||l;d.text(s)}})),s=e("#color-picker"),a=e("#colors-css"),t=e("input#user_id").val(),n=e('input[name="checkuser_id"]').val(),s.on("click.colorpicker",".color-option",function(){var s,i=e(this);if(!i.hasClass("selected")&&(i.siblings(".selected").removeClass("selected"),i.addClass("selected").find('input[type="radio"]').prop("checked",!0),t===n)){if(0===a.length&&(a=e('<link rel="stylesheet" />').appendTo("head")),a.attr("href",i.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{s=e.parseJSON(i.children(".icon_colors").val())}catch(e){}s&&(wp.svgPainter.setColors(s),wp.svgPainter.paint())}e.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:i.children('input[name="admin_color"]').val(),nonce:e("#color-nonce").val()}).done(function(s){s.success&&e("body").removeClass(s.data.previousScheme).addClass(s.data.currentScheme)})}}),i()}),e("#destroy-sessions").on("click",function(s){var a=e(this);wp.ajax.post("destroy-sessions",{nonce:e("#_wpnonce").val(),user_id:e("#user_id").val()}).done(function(e){a.prop("disabled",!0),a.siblings(".notice").remove(),a.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")}).fail(function(e){a.siblings(".notice").remove(),a.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")}),s.preventDefault()}),window.generatePassword=s,e(window).on("beforeunload",function(){if(!0===l)return userProfileL10n.warn})}(jQuery);