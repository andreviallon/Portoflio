!function(e){"use strict";var t,i,d;d=wp.media.view.MediaFrame.AudioDetails.extend({createStates:function e(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new wp.media.controller.MediaLibrary({type:"audio",id:"add-audio-source",title:wp.media.view.l10n.audioAddSourceTitle,toolbar:"add-audio-source",media:this.media,menu:!1})])}}),t=e.MediaWidgetModel.extend({}),i=e.MediaWidgetControl.extend({showDisplaySettings:!1,mapModelToMediaFrameProps:function t(i){var d=this,a;return(a=e.MediaWidgetControl.prototype.mapModelToMediaFrameProps.call(this,i)).link="embed",a},renderPreview:function e(){var t=this,i,d,a,o;a=this.model.get("attachment_id"),o=this.model.get("url"),(a||o)&&(i=this.$el.find(".media-widget-preview"),d=wp.template("wp-media-widget-audio-preview"),i.html(d({model:{attachment_id:this.model.get("attachment_id"),src:o},error:this.model.get("error")})),wp.mediaelement.initialize())},editMedia:function e(){var t=this,i,a,o;a=t.mapModelToMediaFrameProps(t.model.toJSON()),i=new d({frame:"audio",state:"audio-details",metadata:a}),wp.media.frame=i,i.$el.addClass("media-widget"),o=function(e){t.selectedAttachment.set(e),t.model.set(_.extend(t.model.defaults(),t.mapMediaToModelProps(e),{error:!1}))},i.state("audio-details").on("update",o),i.state("replace-audio").on("replace",o),i.on("close",function(){i.detach()}),i.open()}}),e.controlConstructors.media_audio=i,e.modelConstructors.media_audio=t}(wp.mediaWidgets);