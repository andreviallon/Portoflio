!function(t){function e(t){return t.split(new RegExp(a+"\\s*"))}function o(t){return e(t).pop()}if(void 0!==window.tagsSuggestL10n&&void 0!==window.uiAutocompleteL10n){var n=0,a=window.tagsSuggestL10n.tagDelimiter||",";t.fn.wpTagsSuggest=function(i){var r,u,s=t(this),l=(i=i||{}).taxonomy||s.attr("data-wp-taxonomy")||"post_tag";return delete i.taxonomy,i=t.extend({source:function(e,a){var i;u!==e.term?(i=o(e.term),t.get(window.ajaxurl,{action:"ajax-tag-search",tax:l,q:i}).always(function(){s.removeClass("ui-autocomplete-loading")}).done(function(t){var e,o=[];if(t){for(e in t=t.split("\n")){var i=++n;o.push({id:i,name:t[e]})}r=o,a(o)}else a(o)}),u=e.term):a(r)},focus:function(t,e){s.attr("aria-activedescendant","wp-tags-autocomplete-"+e.item.id),t.preventDefault()},select:function(o,n){var i=e(s.val());return i.pop(),i.push(n.item.name,""),s.val(i.join(a+" ")),t.ui.keyCode.TAB===o.keyCode?(window.wp.a11y.speak(window.tagsSuggestL10n.termSelected,"assertive"),o.preventDefault()):t.ui.keyCode.ENTER===o.keyCode&&(window.tagBox&&(window.tagBox.userAction="add",window.tagBox.flushTags(t(this).closest(".tagsdiv"))),o.preventDefault(),o.stopPropagation()),!1},open:function(){s.attr("aria-expanded","true")},close:function(){s.attr("aria-expanded","false")},minLength:2,position:{my:"left top+2",at:"left bottom",collision:"none"},messages:{noResults:window.uiAutocompleteL10n.noResults,results:function(t){return t>1?window.uiAutocompleteL10n.manyResults.replace("%d",t):window.uiAutocompleteL10n.oneResult}}},i),s.on("keydown",function(){s.removeAttr("aria-activedescendant")}).autocomplete(i).autocomplete("instance")._renderItem=function(e,o){return t('<li role="option" id="wp-tags-autocomplete-'+o.id+'">').text(o.name).appendTo(e)},s.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":s.autocomplete("widget").attr("id")}).on("focus",function(){var t;e(s.val()).pop()&&s.autocomplete("search")}).autocomplete("widget").addClass("wp-tags-autocomplete").attr("role","listbox").removeAttr("tabindex").on("menufocus",function(t,e){e.item.attr("aria-selected","true")}).on("menublur",function(){t(this).find('[aria-selected="true"]').removeAttr("aria-selected")}),this}}}(jQuery);