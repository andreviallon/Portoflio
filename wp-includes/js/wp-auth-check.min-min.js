!function(e){function a(){var a,n=e("#wp-auth-check"),o=e("#wp-auth-check-form"),h=c.find(".wp-auth-fallback-expired"),d=!1;o.length&&(e(window).on("beforeunload.wp-auth-check",function(e){e.originalEvent.returnValue=window.authcheckL10n.beforeunload}),a=e('<iframe id="wp-auth-check-frame" frameborder="0">').attr("title",h.text()),a.on("load",function(){var a,i;d=!0,o.removeClass("loading");try{i=e(this).contents().find("body"),a=i.height()}catch(e){return c.addClass("fallback"),n.css("max-height",""),o.remove(),void h.focus()}a?i&&i.hasClass("interim-login-success")?t():n.css("max-height",a+40+"px"):i&&i.length||(c.addClass("fallback"),n.css("max-height",""),o.remove(),h.focus())}).attr("src",o.data("src")),o.append(a)),e("body").addClass("modal-open"),c.removeClass("hidden"),a?(a.focus(),setTimeout(function(){d||(c.addClass("fallback"),o.remove(),h.focus())},1e4)):h.focus()}function t(){e(window).off("beforeunload.wp-auth-check"),"undefined"==typeof adminpage||"post-php"!==adminpage&&"post-new-php"!==adminpage||"undefined"==typeof wp||!wp.heartbeat||(e(document).off("heartbeat-tick.wp-auth-check"),wp.heartbeat.connectNow()),c.fadeOut(200,function(){c.addClass("hidden").css("display",""),e("#wp-auth-check-frame").remove(),e("body").removeClass("modal-open")})}function n(){var e=parseInt(window.authcheckL10n.interval,10)||180;o=(new Date).getTime()+1e3*e}var c,o;e(document).on("heartbeat-tick.wp-auth-check",function(e,o){"wp-auth-check"in o&&(n(),!o["wp-auth-check"]&&c.hasClass("hidden")?a():o["wp-auth-check"]&&!c.hasClass("hidden")&&t())}).on("heartbeat-send.wp-auth-check",function(e,a){(new Date).getTime()>o&&(a["wp-auth-check"]=!0)}).ready(function(){n(),c=e("#wp-auth-check-wrap"),c.find(".wp-auth-check-close").on("click",function(){t()})})}(jQuery);