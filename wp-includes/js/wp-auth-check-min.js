!function(e){function a(){var a=e("#wp-auth-check"),n=e("#wp-auth-check-form"),o=c.find(".wp-auth-fallback-expired"),h,d=!1;n.length&&(e(window).on("beforeunload.wp-auth-check",function(e){e.originalEvent.returnValue=window.authcheckL10n.beforeunload}),(h=e('<iframe id="wp-auth-check-frame" frameborder="0">').attr("title",o.text())).on("load",function(){var h,i;d=!0,n.removeClass("loading");try{h=(i=e(this).contents().find("body")).height()}catch(e){return c.addClass("fallback"),a.css("max-height",""),n.remove(),void o.focus()}h?i&&i.hasClass("interim-login-success")?t():a.css("max-height",h+40+"px"):i&&i.length||(c.addClass("fallback"),a.css("max-height",""),n.remove(),o.focus())}).attr("src",n.data("src")),n.append(h)),e("body").addClass("modal-open"),c.removeClass("hidden"),h?(h.focus(),setTimeout(function(){d||(c.addClass("fallback"),n.remove(),o.focus())},1e4)):o.focus()}function t(){e(window).off("beforeunload.wp-auth-check"),"undefined"==typeof adminpage||"post-php"!==adminpage&&"post-new-php"!==adminpage||"undefined"==typeof wp||!wp.heartbeat||(e(document).off("heartbeat-tick.wp-auth-check"),wp.heartbeat.connectNow()),c.fadeOut(200,function(){c.addClass("hidden").css("display",""),e("#wp-auth-check-frame").remove(),e("body").removeClass("modal-open")})}function n(){var e=parseInt(window.authcheckL10n.interval,10)||180;o=(new Date).getTime()+1e3*e}var c,o;e(document).on("heartbeat-tick.wp-auth-check",function(e,o){"wp-auth-check"in o&&(n(),!o["wp-auth-check"]&&c.hasClass("hidden")?a():o["wp-auth-check"]&&!c.hasClass("hidden")&&t())}).on("heartbeat-send.wp-auth-check",function(e,a){(new Date).getTime()>o&&(a["wp-auth-check"]=!0)}).ready(function(){n(),(c=e("#wp-auth-check-wrap")).find(".wp-auth-check-close").on("click",function(){t()})})}(jQuery);