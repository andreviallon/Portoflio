window.autosave=function(){return!0},function($,t){function e(){function e(t){var e,n,o,a=(new Date).getTime(),s=[],r=i();return r&&r.isDirty()&&!r.isHidden()&&a-3e3>u&&(r.save(),u=a),o={post_id:$("#post_ID").val()||0,post_type:$("#post_type").val()||"",post_author:$("#post_author").val()||"",post_title:$("#title").val()||"",content:$("#content").val()||"",excerpt:$("#excerpt").val()||""},"local"===t?o:($('input[id^="in-category-"]:checked').each(function(){s.push(this.value)}),o.catslist=s.join(","),(e=$("#post_name").val())&&(o.post_name=e),(n=$("#parent_id").val())&&(o.parent_id=n),$("#comment_status").prop("checked")&&(o.comment_status="open"),$("#ping_status").prop("checked")&&(o.ping_status="open"),"1"===$("#auto_draft").val()&&(o.auto_draft="1"),o)}function n(t){return"object"==typeof t?(t.post_title||"")+"::"+(t.content||"")+"::"+(t.excerpt||""):($("#title").val()||"")+"::"+($("#content").val()||"")+"::"+($("#excerpt").val()||"")}function o(){p.trigger("autosave-disable-buttons"),setTimeout(a,5e3)}function a(){p.trigger("autosave-enable-buttons")}function i(){return"undefined"!=typeof tinymce&&tinymce.get("content")}function s(){function o(){var e=Math.random().toString(),n=!1;try{t.sessionStorage.setItem("wp-test",e),n=t.sessionStorage.getItem("wp-test")===e,t.sessionStorage.removeItem("wp-test")}catch(t){}return x=n,n}function a(){var t=!1;return x&&h&&(t=sessionStorage.getItem("wp-autosave-"+h),t=t?JSON.parse(t):{}),t}function s(t){var e;return!(!x||!h)&&(e="wp-autosave-"+h,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}function r(){var t=a();return!(!t||!_)&&(t["post_"+_]||!1)}function u(t){var e=a();if(!e||!_)return!1;if(t)e["post_"+_]=t;else{if(!e.hasOwnProperty("post_"+_))return!1;delete e["post_"+_]}return s(e)}function l(){S=!0}function v(){S=!1}function f(t){var o,a,i=!1;return!(S||!x)&&(t?(o=r()||{},$.extend(o,t)):o=e("local"),a=n(o),void 0===b&&(b=c),a!==b&&(o.save_time=(new Date).getTime(),o.status=$("#post_status").val()||"",i=u(o),i&&(b=a),i))}function d(){_=$("#post_ID").val()||0,$("#wp-content-wrap").hasClass("tmce-active")?p.on("tinymce-editor-init.autosave",function(){t.setTimeout(function(){w()},1500)}):w(),y=t.setInterval(f,15e3),$("form#post").on("submit.autosave-local",function(){var e=i(),n=$("#post_ID").val()||0;e&&!e.isHidden()?e.on("submit",function(){f({post_title:$("#title").val()||"",content:$("#content").val()||"",excerpt:$("#excerpt").val()||""})}):f({post_title:$("#title").val()||"",content:$("#content").val()||"",excerpt:$("#excerpt").val()||""});var o="https:"===t.location.protocol;wpCookies.set("wp-saving-post",n+"-check",86400,!1,!1,o)})}function g(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function w(){var t,e,n,o,a=r(),i=wpCookies.get("wp-saving-post"),s=$("#has-newer-autosave").parent(".notice"),c=$(".wp-header-end");if(i===_+"-saved")return wpCookies.remove("wp-saving-post"),void u(!1);a&&(t=$("#content").val()||"",e=$("#title").val()||"",n=$("#excerpt").val()||"",g(t,a.content)&&g(e,a.post_title)&&g(n,a.excerpt)||(c.length||(c=$(".wrap h1, .wrap h2").first()),o=$("#local-storage-notice").insertAfter(c).addClass("notice-warning"),s.length?s.slideUp(150,function(){o.slideDown(150)}):o.slideDown(200),o.find(".restore-backup").on("click.autosave-local",function(){m(a),o.fadeTo(250,0,function(){o.slideUp(150)})})))}function m(t){var e;return!!t&&(b=n(t),$("#title").val()!==t.post_title&&$("#title").focus().val(t.post_title||""),$("#excerpt").val(t.excerpt||""),e=i(),e&&!e.isHidden()&&"undefined"!=typeof switchEditors?(e.settings.wpautop&&t.content&&(t.content=switchEditors.wpautop(t.content)),e.undoManager.transact(function(){e.setContent(t.content||""),e.nodeChanged()})):($("#content-html").click(),$("#content").focus(),document.execCommand("selectAll"),document.execCommand("insertText",!1,t.content||"")),!0)}var h,_,x,y,b,S=!1;return h=void 0!==t.autosaveL10n&&t.autosaveL10n.blog_id,o()&&h&&($("#content").length||$("#excerpt").length)&&p.ready(d),{hasStorage:x,getSavedPostData:r,save:f,suspend:l,resume:v}}function r(){function i(){g=!0,t.clearTimeout(w),w=t.setTimeout(function(){g=!1},1e4)}function s(){x=!0}function r(){x=!1}function u(t){d(),g=!1,h=m,m="",p.trigger("after-autosave",[t]),a(),t.success&&$("#auto_draft").val("")}function l(){_=0,wp.heartbeat.connectNow()}function v(){return n()!==c}function f(){var a,s;return!(x||g||!t.autosave())&&(!((new Date).getTime()<_)&&(a=e(),s=n(a),void 0===h&&(h=c),s!==h&&(m=s,i(),o(),p.trigger("wpcountwords",[a.content]).trigger("before-autosave",[a]),a._wpnonce=$("#_wpnonce").val()||"",a)))}function d(){_=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var g,w,m,h,_=0,x=!1;return p.on("heartbeat-send.autosave",function(t,e){var n=f();n&&(e.wp_autosave=n)}).on("heartbeat-tick.autosave",function(t,e){e.wp_autosave&&u(e.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(t,e,n){if("timeout"===e||603===n){var a=$("#lost-connection-notice");wp.autosave.local.hasStorage||a.find(".hide-if-no-sessionstorage").hide(),a.show(),o()}}).on("heartbeat-connection-restored.autosave",function(){$("#lost-connection-notice").hide(),a()}).ready(function(){d()}),{tempBlockSave:i,triggerSave:l,postChanged:v,suspend:s,resume:r}}var c,u=0,p=$(document);return p.on("tinymce-editor-init.autosave",function(e,o){"content"===o.id&&t.setTimeout(function(){o.save(),c=n()},1e3)}).ready(function(){c=n()}),{getPostData:e,getCompareString:n,disableButtons:o,enableButtons:a,local:s(),server:r()}}t.wp=t.wp||{},t.wp.autosave=e()}(jQuery,window);