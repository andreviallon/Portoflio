!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(r),r}:e(jQuery)}(function($){"use strict";function e(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),$(e.target).closest("form").ajaxSubmit(t))}function t(e){var t=e.target,r=$(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var n=t.form;if(n.clk=t,"image"===t.type)if(void 0!==e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof $.fn.offset){var i=r.offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function r(){if($.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var a=/\r?\n/g,n={};n.fileapi=void 0!==$('<input type="file">').get(0).files,n.formdata=void 0!==window.FormData;var i=!!$.fn.prop;$.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},$.fn.ajaxSubmit=function(e,t,a,o){function s(t){var r=$.param(t,e.traditional).split("&"),a=r.length,n=[],i,o;for(i=0;i<a;i++)r[i]=r[i].replace(/\+/g," "),o=r[i].split("="),n.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return n}function u(t){for(var r=new FormData,a=0;a<t.length;a++)r.append(t[a].name,t[a].value);if(e.extraData){var n=s(e.extraData);for(a=0;a<n.length;a++)n[a]&&r.append(n[a][0],n[a][1])}e.data=null;var i=$.extend(!0,{},$.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(i.xhr=function(){var t=$.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var r=0,a=t.loaded||t.position,n=t.total;t.lengthComputable&&(r=Math.ceil(a/n*100)),e.uploadProgress(t,a,n,r)},!1),t}),i.data=null;var o=i.beforeSend;return i.beforeSend=function(t,a){e.formData?a.data=e.formData:a.data=r,o&&o.call(this,t,a)},$.ajax(i)}function c(t){function a(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){r("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(a){r("cannot get iframe.contentDocument: "+a),t=e.document}return t}function n(){function e(){try{var t=a(g).readyState;r("state = "+t),t&&"uninitialized"===t.toLowerCase()&&setTimeout(e,50)}catch(e){r("Server abort: ",e," (",e.name,")"),o(A),j&&clearTimeout(j),j=void 0}}var t=p.attr2("target"),n=p.attr2("action"),i="multipart/form-data",u=p.attr("enctype")||p.attr("encoding")||i;s.setAttribute("target",m),l&&!/post/i.test(l)||s.setAttribute("method","POST"),n!==f.url&&s.setAttribute("action",f.url),f.skipEncodingOverride||l&&!/post/i.test(l)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(j=setTimeout(function(){T=!0,o(D)},f.timeout));var c=[];try{if(f.extraData)for(var d in f.extraData)f.extraData.hasOwnProperty(d)&&($.isPlainObject(f.extraData[d])&&f.extraData[d].hasOwnProperty("name")&&f.extraData[d].hasOwnProperty("value")?c.push($('<input type="hidden" name="'+f.extraData[d].name+'">',S).val(f.extraData[d].value).appendTo(s)[0]):c.push($('<input type="hidden" name="'+d+'">',S).val(f.extraData[d]).appendTo(s)[0]));f.iframeTarget||h.appendTo(k),g.attachEvent?g.attachEvent("onload",o):g.addEventListener("load",o,!1),setTimeout(e,15);try{s.submit()}catch(e){var v=document.createElement("form").submit;v.apply(s)}}finally{s.setAttribute("action",n),s.setAttribute("enctype",u),t?s.setAttribute("target",t):p.removeAttr("target"),$(c).remove()}}function o(e){if(!x.aborted&&!X){if(M=a(g),M||(r("cannot access response document"),e=A),e===D&&x)return x.abort("timeout"),void w.reject(x,"timeout");if(e===A&&x)return x.abort("server abort"),void w.reject(x,"error","server abort");if(M&&M.location.href!==f.iframeSrc||T){g.detachEvent?g.detachEvent("onload",o):g.removeEventListener("load",o,!1);var t="success",n;try{if(T)throw"timeout";var i="xml"===f.dataType||M.XMLDocument||$.isXMLDoc(M);if(r("isXml="+i),!i&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return r("requeing onLoad callback, DOM not available"),void setTimeout(o,250);var s=M.body?M.body:M.documentElement;x.responseText=s?s.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,i&&(f.dataType="xml"),x.getResponseHeader=function(e){return{"content-type":f.dataType}[e.toLowerCase()]},s&&(x.status=Number(s.getAttribute("status"))||x.status,x.statusText=s.getAttribute("statusText")||x.statusText);var u=(f.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);if(c||f.textarea){var l=M.getElementsByTagName("textarea")[0];if(l)x.responseText=l.value,x.status=Number(l.getAttribute("status"))||x.status,x.statusText=l.getAttribute("statusText")||x.statusText;else if(c){var p=M.getElementsByTagName("pre")[0],m=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:m&&(x.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"===u&&!x.responseXML&&x.responseText&&(x.responseXML=C(x.responseText));try{E=_(x,u,f)}catch(e){t="parsererror",x.error=n=e||t}}catch(e){r("error caught: ",e),t="error",x.error=n=e||t}x.aborted&&(r("upload aborted"),t=null),x.status&&(t=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===t?(f.success&&f.success.call(f.context,E,"success",x),w.resolve(x.responseText,"success",x),d&&$.event.trigger("ajaxSuccess",[x,f])):t&&(void 0===n&&(n=x.statusText),f.error&&f.error.call(f.context,x,t,n),w.reject(x,"error",n),d&&$.event.trigger("ajaxError",[x,f,n])),d&&$.event.trigger("ajaxComplete",[x,f]),d&&!--$.active&&$.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,x,t),X=!0,f.timeout&&clearTimeout(j),setTimeout(function(){f.iframeTarget?h.attr("src",f.iframeSrc):h.remove(),x.responseXML=null},100)}}}var s=p[0],u,c,f,d,m,h,g,x,y,b,T,j,w=$.Deferred();if(w.abort=function(e){x.abort(e)},t)for(c=0;c<v.length;c++)u=$(v[c]),i?u.prop("disabled",!1):u.removeAttr("disabled");f=$.extend(!0,{},$.ajaxSettings,e),f.context=f.context||f,m="jqFormIO"+(new Date).getTime();var S=s.ownerDocument,k=p.closest("body");if(f.iframeTarget?(h=$(f.iframeTarget,S),b=h.attr2("name"),b?m=b:h.attr2("name",m)):(h=$('<iframe name="'+m+'" src="'+f.iframeSrc+'" />',S),h.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=h[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";r("aborting upload... "+t),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(e){}h.attr("src",f.iframeSrc),x.error=t,f.error&&f.error.call(f.context,x,t,e),d&&$.event.trigger("ajaxError",[x,f,t]),f.complete&&f.complete.call(f.context,x,t)}},d=f.global,d&&0==$.active++&&$.event.trigger("ajaxStart"),d&&$.event.trigger("ajaxSend",[x,f]),f.beforeSend&&!1===f.beforeSend.call(f.context,x,f))return f.global&&$.active--,w.reject(),w;if(x.aborted)return w.reject(),w;(y=s.clk)&&(b=y.name)&&!y.disabled&&(f.extraData=f.extraData||{},f.extraData[b]=y.value,"image"===y.type&&(f.extraData[b+".x"]=s.clk_x,f.extraData[b+".y"]=s.clk_y));var D=1,A=2,L=$("meta[name=csrf-token]").attr("content"),F=$("meta[name=csrf-param]").attr("content");F&&L&&(f.extraData=f.extraData||{},f.extraData[F]=L),f.forceSync?n():setTimeout(n,10);var E,M,O=50,X,C=$.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},q=$.parseJSON||function(e){return window.eval("("+e+")")},_=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n=("xml"===t||!t)&&a.indexOf("xml")>=0,i=n?e.responseXML:e.responseText;return n&&"parsererror"===i.documentElement.nodeName&&$.error&&$.error("parsererror"),r&&r.dataFilter&&(i=r.dataFilter(i,t)),"string"==typeof i&&(("json"===t||!t)&&a.indexOf("json")>=0?i=q(i):("script"===t||!t)&&a.indexOf("javascript")>=0&&$.globalEval(i)),i};return w}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var l,f,d,p=this;"function"==typeof e?e={success:e}:"string"==typeof e||!1===e&&arguments.length>0?(e={url:e,data:t,dataType:a},"function"==typeof o&&(e.success=o)):void 0===e&&(e={}),l=e.method||e.type||this.attr2("method"),f=e.url||this.attr2("action"),d="string"==typeof f?$.trim(f):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),e=$.extend(!0,{url:d,success:$.ajaxSettings.success,type:l||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var m={};if(this.trigger("form-pre-serialize",[this,e,m]),m.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=e.traditional;void 0===h&&(h=$.ajaxSettings.traditional);var v=[],g,x=this.formToArray(e.semantic,v,e.filtering);if(e.data){var y=$.isFunction(e.data)?e.data(x):e.data;e.extraData=y,g=$.param(y,h)}if(e.beforeSubmit&&!1===e.beforeSubmit(x,this,e))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[x,this,e,m]),m.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var b=$.param(x,h);g&&(b=b?b+"&"+g:g),"GET"===e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+b,e.data=null):e.data=b;var T=[];if(e.resetForm&&T.push(function(){p.resetForm()}),e.clearForm&&T.push(function(){p.clearForm(e.includeHidden)}),!e.dataType&&e.target){var j=e.success||function(){};T.push(function(t,r,a){var n=arguments,i=e.replaceTarget?"replaceWith":"html";$(e.target)[i](t).each(function(){j.apply(this,n)})})}else e.success&&($.isArray(e.success)?$.merge(T,e.success):T.push(e.success));if(e.success=function(t,r,a){for(var n=e.context||this,i=0,o=T.length;i<o;i++)T[i].apply(n,[t,r,a||p,p])},e.error){var w=e.error;e.error=function(t,r,a){var n=e.context||this;w.apply(n,[t,r,a,p])}}if(e.complete){var S=e.complete;e.complete=function(t,r){var a=e.context||this;S.apply(a,[t,r,p])}}var k=$("input[type=file]:enabled",this).filter(function(){return""!==$(this).val()}),D=k.length>0,A="multipart/form-data",L=p.attr("enctype")===A||p.attr("encoding")===A,F=n.fileapi&&n.formdata;r("fileAPI :"+F);var E=(D||L)&&!F,M;!1!==e.iframe&&(e.iframe||E)?e.closeKeepAlive?$.get(e.closeKeepAlive,function(){M=c(x)}):M=c(x):M=(D||L)&&F?u(x):$.ajax(e),p.removeData("jqxhr").data("jqxhr",M);for(var O=0;O<v.length;O++)v[O]=null;return this.trigger("form-submit-notify",[this,e]),this},$.fn.ajaxForm=function(a,n,i,o){if(("string"==typeof a||!1===a&&arguments.length>0)&&(a={url:a,data:n,dataType:i},"function"==typeof o&&(a.success=o)),a=a||{},a.delegation=a.delegation&&$.isFunction($.fn.on),!a.delegation&&0===this.length){var s={s:this.selector,c:this.context};return!$.isReady&&s.s?(r("DOM not ready, queuing ajaxForm"),$(function(){$(s.s,s.c).ajaxForm(a)}),this):(r("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this)}return a.delegation?($(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,t).on("submit.form-plugin",this.selector,a,e).on("click.form-plugin",this.selector,a,t),this):this.ajaxFormUnbind().on("submit.form-plugin",a,e).on("click.form-plugin",a,t)},$.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},$.fn.formToArray=function(e,t,r){var a=[];if(0===this.length)return a;var i=this[0],o=this.attr("id"),s=e||void 0===i.elements?i.getElementsByTagName("*"):i.elements,u;if(s&&(s=$.makeArray(s)),o&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(u=$(':input[form="'+o+'"]').get(),u.length&&(s=(s||[]).concat(u))),!s||!s.length)return a;$.isFunction(r)&&(s=$.map(s,r));var c,l,f,d,p,m,h;for(c=0,m=s.length;c<m;c++)if(p=s[c],(f=p.name)&&!p.disabled)if(e&&i.clk&&"image"===p.type)i.clk===p&&(a.push({name:f,value:$(p).val(),type:p.type}),a.push({name:f+".x",value:i.clk_x},{name:f+".y",value:i.clk_y}));else if((d=$.fieldValue(p,!0))&&d.constructor===Array)for(t&&t.push(p),l=0,h=d.length;l<h;l++)a.push({name:f,value:d[l]});else if(n.fileapi&&"file"===p.type){t&&t.push(p);var v=p.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:p.type});else a.push({name:f,value:"",type:p.type})}else null!==d&&void 0!==d&&(t&&t.push(p),a.push({name:f,value:d,type:p.type,required:p.required}));if(!e&&i.clk){var g=$(i.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"===x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+".x",value:i.clk_x},{name:f+".y",value:i.clk_y}))}return a},$.fn.formSerialize=function(e){return $.param(this.formToArray(e))},$.fn.fieldSerialize=function(e){var t=[];return this.each(function(){var r=this.name;if(r){var a=$.fieldValue(this,e);if(a&&a.constructor===Array)for(var n=0,i=a.length;n<i;n++)t.push({name:r,value:a[n]});else null!==a&&void 0!==a&&t.push({name:this.name,value:a})}}),$.param(t)},$.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],i=$.fieldValue(n,e);null===i||void 0===i||i.constructor===Array&&!i.length||(i.constructor===Array?$.merge(t,i):t.push(i))}return t},$.fieldValue=function(e,t){var r=e.name,n=e.type,i=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"===n||"button"===n||("checkbox"===n||"radio"===n)&&!e.checked||("submit"===n||"image"===n)&&e.form&&e.form.clk!==e||"select"===i&&-1===e.selectedIndex))return null;if("select"===i){var o=e.selectedIndex;if(o<0)return null;for(var s=[],u=e.options,c="select-one"===n,l=c?o+1:u.length,f=c?o:0;f<l;f++){var d=u[f];if(d.selected&&!d.disabled){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return p;s.push(p)}}return s}return $(e).val().replace(a,"\r\n")},$.fn.clearForm=function(e){return this.each(function(){$("input,select,textarea",this).clearFields(e)})},$.fn.clearFields=$.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,a=this.tagName.toLowerCase();t.test(r)||"textarea"===a?this.value="":"checkbox"===r||"radio"===r?this.checked=!1:"select"===a?this.selectedIndex=-1:"file"===r?/MSIE/.test(navigator.userAgent)?$(this).replaceWith($(this).clone(!0)):$(this).val(""):e&&(!0===e&&/hidden/.test(r)||"string"==typeof e&&$(this).is(e))&&(this.value="")})},$.fn.resetForm=function(){return this.each(function(){var e=$(this),t=this.tagName.toLowerCase();switch(t){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var r=e.parents("select");return r.length&&r[0].multiple?"option"===t?this.selected=this.defaultSelected:e.find("option").resetForm():r.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var a=$(e.attr("for")),n=e.find("input,select,textarea");return a[0]&&n.unshift(a[0]),n.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},$.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},$.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var t=this.type;if("checkbox"===t||"radio"===t)this.checked=e;else if("option"===this.tagName.toLowerCase()){var r=$(this).parent("select");e&&r[0]&&"select-one"===r[0].type&&r.find("option").selected(!1),this.selected=e}})},$.fn.ajaxSubmit.debug=!1});