!function(){var t=function(){"use strict";function t(){}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o,r,n,a,l=function(t,e){var o;return t.dom.getParents(t.selection.getStart(),function(t){var r;(r=t.style["forecolor"===e?"color":"background-color"])&&(o=r)}),o},c=function(t){var e,o=[];for(e=0;e<t.length;e+=2)o.push({text:t[e+1],color:"#"+t[e]});return o},i=function(t,e,o){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:o}),t.nodeChanged()})},u=function(t,e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})},m,s=function(t){t.addCommand("mceApplyTextcolor",function(e,o){i(t,e,o)}),t.addCommand("mceRemoveTextcolor",function(e){u(t,e)})},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),g=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],F=function(t){return t.getParam("textcolor_map",g)},b,p,C=function(t){return t.getParam("textcolor_rows",5)},y=function(t){return t.getParam("textcolor_cols",8)},v,h,P,k,x=function(t){return t.getParam("color_picker_callback",null)},T=function(t){return"function"==typeof x(t)},_=function(t){return t.getParam("forecolor_map",F(t))},A=function(t){return t.getParam("backcolor_map",F(t))},w=function(t){return t.getParam("forecolor_rows",C(t))},M=function(t){return t.getParam("backcolor_rows",C(t))},B=function(t){return t.getParam("forecolor_cols",y(t))},R=function(t){return t.getParam("backcolor_cols",y(t))},D=x,I=T,O=tinymce.util.Tools.resolve("tinymce.util.I18n"),G,N=function(t,e,o,r){var n,a,l,i,u,m,s,f=0,g=d.DOM.uniqueId("mcearia"),F=function(t,e){var o="transparent"===t;return'<td class="mce-grid-cell'+(o?" mce-colorbtn-trans":"")+'"><div id="'+g+"-"+f+++'" data-mce-color="'+(t||"")+'" role="option" tabIndex="-1" style="'+(t?"background-color: "+t:"")+'" title="'+O.translate(e)+'">'+(o?"&#215;":"")+"</div></td>"};for((n=c(o)).push({text:O.translate("No color"),color:"transparent"}),l='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',i=n.length-1,m=0;m<e;m++){for(l+="<tr>",u=0;u<t;u++)l+=(s=m*t+u)>i?"<td></td>":F((a=n[s]).color,a.text);l+="</tr>"}if(r){for(l+='<tr><td colspan="'+t+'" class="mce-custom-color-btn"><div id="'+g+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+g+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+O.translate("Custom...")+"</button></div></td></tr>",l+="<tr>",u=0;u<t;u++)l+=F("","Custom color");l+="</tr>"}return l+="</tbody></table>"},q=function t(e,o){e.style.background=o,e.setAttribute("data-mce-color",o)},L=function(t){return function(e){var o=e.control;o._color?t.execCommand("mceApplyTextcolor",o.settings.format,o._color):t.execCommand("mceRemoveTextcolor",o.settings.format)}},S=function(t,e){return function(o){var r=this.parent(),n,a=l(t,r.settings.format),c=function(e){t.execCommand("mceApplyTextcolor",r.settings.format,e),r.hidePanel(),r.color(e)},i=function(){t.execCommand("mceRemoveTextcolor",r.settings.format),r.hidePanel(),r.resetColor()},u;d.DOM.getParent(o.target,".mce-custom-color-btn")&&(r.hidePanel(),D(t).call(t,function(t){var o=r.panel.getEl().getElementsByTagName("table")[0],n,a,l;for(n=f.map(o.rows[o.rows.length-1].childNodes,function(t){return t.firstChild}),l=0;l<n.length&&(a=n[l]).getAttribute("data-mce-color");l++);if(l===e)for(l=0;l<e-1;l++)q(n[l],n[l+1].getAttribute("data-mce-color"));q(a,t),c(t)},a));(n=o.target.getAttribute("data-mce-color"))?(this.lastId&&d.DOM.get(this.lastId).setAttribute("aria-selected","false"),o.target.setAttribute("aria-selected",!0),this.lastId=o.target.id,"transparent"===n?i():c(n)):null!==n&&r.hidePanel()}},E=function(t,e){return function(){var o=e?B(t):R(t),r=e?w(t):M(t),n=e?_(t):A(t),a=I(t);return N(o,r,n,a)}},Y,z=function(t){t.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:E(t,!0),onclick:S(t,B(t))},onclick:L(t)}),t.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:E(t,!1),onclick:S(t,R(t))},onclick:L(t)})};return e.add("textcolor",function(t){s(t),z(t)}),t}()}();