!function(){var e={},t=function(e){for(var t=a(e),i=e.split("."),n=Function("return this;")(),o=0;o<i.length-1;++o)void 0===n[i[o]]&&(n[i[o]]={}),n=n[i[o]];n[i[i.length-1]]=t},i=function(t){for(var i=e[t],n=i.deps,o=i.defn,r=n.length,l=new Array(r),s=0;s<r;++s)l[s]=a(n[s]);var c=o.apply(null,l);if(void 0===c)throw"module ["+t+"] returned undefined";i.instance=c},n=function(t,i,n){if("string"!=typeof t)throw"module id must be a string";if(void 0===i)throw"no dependencies for "+t;if(void 0===n)throw"no definition function for "+t;e[t]={deps:i,defn:n,instance:void 0}},a=function(t){var n=e[t];if(void 0===n)throw"module ["+t+"] was undefined";return void 0===n.instance&&i(t),n.instance},o=function(e,t){for(var i=e.length,n=new Array(i),o=0;o<i;++o)n.push(a(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:n,require:o,demand:a}}};var r=n,l=o,s=a,c=function(e,t){r(e,[],function(){return t})};c("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),r("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),c("global!document",document),c("global!Math",Math),c("global!RegExp",RegExp),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),r("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),r("tinymce.core.util.JSON",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.JSON")}),r("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),r("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),r("tinymce.plugins.image.core.Uploader",["tinymce.core.util.Promise","tinymce.core.util.Tools","global!document"],function(e,t,i){return function(i){function n(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function a(e,t,a,o){var r,l;r=new XMLHttpRequest,r.open("POST",i.url),r.withCredentials=i.credentials,r.upload.onprogress=function(e){o(e.loaded/e.total*100)},r.onerror=function(){a("Image upload failed due to a XHR Transport error. Code: "+r.status)},r.onload=function(){var e;return r.status<200||r.status>=300?void a("HTTP Error: "+r.status):(e=JSON.parse(r.responseText))&&"string"==typeof e.location?void t(n(i.basePath,e.location)):void a("Invalid JSON: "+r.responseText)},l=new FormData,l.append("file",e.blob(),e.filename()),r.send(l)}function o(t,i){return new e(function(e,n){try{i(t,e,n,s)}catch(e){n(e.message)}})}function r(e){return e===a}function l(t){return!i.url&&r(i.handler)?e.reject("Upload url missng from the settings."):o(t,i.handler)}var s=function(){};return i=t.extend({credentials:!1,handler:a},i),{upload:l}}}),r("tinymce.plugins.image.core.Utils",["tinymce.core.util.Tools","global!Math","global!document"],function(e,t,i){return{getImageSize:function(e,n){function a(e,t){o.parentNode&&o.parentNode.removeChild(o),n({width:e,height:t})}var o=i.createElement("img");o.onload=function(){a(t.max(o.width,o.clientWidth),t.max(o.height,o.clientHeight))},o.onerror=function(){a()};var r=o.style;r.visibility="hidden",r.position="fixed",r.bottom=r.left=0,r.width=r.height="auto",i.body.appendChild(o),o.src=e},buildListItems:function(t,i,n){function a(t,n){return n=n||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=a(e.menu):(t.value=e.value,i(t)),n.push(t)}),n}return a(t,n||[])},removePixelSuffix:function(e){return e&&(e=e.replace(/px$/,"")),e},addPixelSuffix:function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}}}),r("tinymce.plugins.image.ui.Dialog",["global!document","global!Math","global!RegExp","tinymce.core.Env","tinymce.core.ui.Factory","tinymce.core.util.JSON","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.image.core.Uploader","tinymce.plugins.image.core.Utils"],function(e,t,i,n,a,o,r,l,s,c){return function(e){function u(t){var i=e.settings.image_list;"string"==typeof i?l.send({url:i,success:function(e){t(o.parse(e))}}):"function"==typeof i?i(t):t(i)}function g(o){function l(){var t=a.get("Throbber"),i=new t(y.getEl()),n=this.value(),o=new s({url:T.images_upload_url,basePath:T.images_upload_base_path,credentials:T.images_upload_credentials,handler:T.images_upload_handler}),r=e.editorUpload.blobCache.create({blob:n,name:n.name?n.name.replace(/\.[^\.]+$/,""):null,base64:"data:image/fake;base64,="}),l=function(){i.hide(),URL.revokeObjectURL(r.blobUri())};return i.show(),o.upload(r).then(function(e){var t=y.find("#src");return t.value(e),y.find("tabpanel")[0].activateTab(0),t.fire("change"),l(),e},function(t){e.windowManager.alert(t),l()})}function u(t){return e.schema.getTextBlockElements()[t.nodeName]}function g(){var e,i,n,a;e=y.find("#width")[0],i=y.find("#height")[0],e&&i&&(n=e.value(),a=i.value(),y.find("#constrain")[0].checked()&&_&&N&&n&&a&&(_!=n?(a=t.round(n/_*a),isNaN(a)||i.value(a)):(n=t.round(a/N*n),isNaN(n)||e.value(n))),_=n,N=a)}function m(){if(e.settings.image_advtab){var t=y.toJSON(),i=S.parseStyle(t.style);i=c.mergeMargins(i),t.vspace&&(i["margin-top"]=i["margin-bottom"]=c.addPixelSuffix(t.vspace)),t.hspace&&(i["margin-left"]=i["margin-right"]=c.addPixelSuffix(t.hspace)),t.border&&(i["border-width"]=c.addPixelSuffix(t.border)),y.find("#style").value(S.serializeStyle(S.parseStyle(S.serializeStyle(i))))}}function d(){if(e.settings.image_advtab){var t=y.toJSON(),i=S.parseStyle(t.style);y.find("#vspace").value(""),y.find("#hspace").value(""),i=c.mergeMargins(i),(i["margin-top"]&&i["margin-bottom"]||i["margin-right"]&&i["margin-left"])&&(i["margin-top"]===i["margin-bottom"]?y.find("#vspace").value(c.removePixelSuffix(i["margin-top"])):y.find("#vspace").value(""),i["margin-right"]===i["margin-left"]?y.find("#hspace").value(c.removePixelSuffix(i["margin-right"])):y.find("#hspace").value("")),i["border-width"]&&y.find("#border").value(c.removePixelSuffix(i["border-width"])),y.find("#style").value(S.serializeStyle(S.parseStyle(S.serializeStyle(i))))}}function f(t){function i(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){v.width||v.height||!A||S.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),i()},t.onerror=i}function p(){var t,i;m(),g(),v=r.extend(v,y.toJSON()),v.alt||(v.alt=""),v.title||(v.title=""),""===v.width&&(v.width=null),""===v.height&&(v.height=null),v.style||(v.style=null),v={src:v.src,alt:v.alt,title:v.title,width:v.width,height:v.height,style:v.style,caption:v.caption,class:v.class},e.undoManager.transact(function(){if(v.src){if(""===v.title&&(v.title=null),x?S.setAttribs(x,v):(v.id="__mcenew",e.focus(),e.selection.setContent(S.createHTML("img",v)),x=S.get("__mcenew"),S.setAttrib(x,"id",null)),e.editorUpload.uploadImagesAuto(),!1===v.caption&&S.is(x.parentNode,"figure.image")&&(t=x.parentNode,S.setAttrib(x,"contenteditable",null),S.insertAfter(x,t),S.remove(t),e.selection.select(x),e.nodeChanged()),!0!==v.caption)f(x);else if(!S.is(x.parentNode,"figure.image")){i=x,x=x.cloneNode(!0),x.contentEditable=!0,t=S.create("figure",{class:"image"}),t.appendChild(x),t.appendChild(S.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable=!1;var n=S.getParent(i,u);n?S.split(n,i,t):S.replace(t,i),e.selection.select(t)}}else if(x){var a=S.is(x.parentNode,"figure.image")?x.parentNode:x;S.remove(a),e.focus(),e.nodeChanged(),S.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})}function h(t){var n,a,o,l=t.meta||{};P&&P.value(e.convertURL(this.value(),"src")),r.each(l,function(e,t){y.find("#"+t).value(e)}),l.width||l.height||(n=e.convertURL(this.value(),"src"),a=e.settings.image_prepend_url,o=new i("^(?:[a-z]+:)?//","i"),a&&!o.test(n)&&n.substring(0,a.length)!==a&&(n=a+n),this.value(n),c.getImageSize(e.documentBaseURI.toAbsolute(this.value()),function(e){e.width&&e.height&&A&&(_=e.width,N=e.height,y.find("#width").value(_),y.find("#height").value(N))}))}function b(e){e.meta=y.toJSON()}var y,v={},x,w,S=e.dom,T=e.settings,_,N,P,C,A=!1!==T.image_dimensions;x=e.selection.getNode(),w=S.getParent(x,"figure.image"),w&&(x=S.select("img",w)[0]),x&&("IMG"!=x.nodeName||x.getAttribute("data-mce-object")||x.getAttribute("data-mce-placeholder"))&&(x=null),x&&(_=S.getAttrib(x,"width"),N=S.getAttrib(x,"height"),v={src:S.getAttrib(x,"src"),alt:S.getAttrib(x,"alt"),title:S.getAttrib(x,"title"),class:S.getAttrib(x,"class"),width:_,height:N,caption:!!w}),o&&(P={type:"listbox",label:"Image list",values:c.buildListItems(o,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:v.src&&e.convertURL(v.src,"src"),onselect:function(e){var t=y.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),y.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){P=this}}),e.settings.image_class_list&&(C={name:"class",type:"listbox",label:"Class",values:c.buildListItems(e.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})});var I=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:h,onbeforecall:b},P];if(!1!==e.settings.image_description&&I.push({name:"alt",type:"textbox",label:"Image description"}),e.settings.image_title&&I.push({name:"title",type:"textbox",label:"Image Title"}),A&&I.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:g,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:g,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),I.push(C),e.settings.image_caption&&n.ceFalse&&I.push({name:"caption",type:"checkbox",label:"Caption"}),e.settings.image_advtab||e.settings.images_upload_url){var L=[{title:"General",type:"form",items:I}];if(e.settings.image_advtab&&(x&&(x.style.marginLeft&&x.style.marginRight&&x.style.marginLeft===x.style.marginRight&&(v.hspace=c.removePixelSuffix(x.style.marginLeft)),x.style.marginTop&&x.style.marginBottom&&x.style.marginTop===x.style.marginBottom&&(v.vspace=c.removePixelSuffix(x.style.marginTop)),x.style.borderWidth&&(v.border=c.removePixelSuffix(x.style.borderWidth)),v.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(x,"style")))),L.push({title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:d},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:m},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]})),e.settings.images_upload_url){var R=".jpg,.jpeg,.png,.gif",M={title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:R,onchange:l},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:R,height:100,onchange:l}]};L.push(M)}y=e.windowManager.open({title:"Insert/edit image",data:v,bodyType:"tabpanel",body:L,onSubmit:p})}else y=e.windowManager.open({title:"Insert/edit image",data:v,body:I,onSubmit:p})}function m(){u(g)}return{open:m}}}),r("tinymce.plugins.image.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.plugins.image.ui.Dialog"],function(e,t,i){return e.add("image",function(e){e.on("preInit",function(){function i(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)}function n(e){return function(n){function a(t){t.attr("contenteditable",e?"true":null)}for(var o=n.length,r;o--;)r=n[o],i(r)&&(r.attr("contenteditable",e?"false":null),t.each(r.getAll("figcaption"),a),t.each(r.getAll("img"),a))}}e.parser.addNodeFilter("figure",n(!0)),e.serializer.addNodeFilter("figure",n(!1))}),e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:i(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:i(e).open,context:"insert",prependToContext:!0}),e.addCommand("mceImage",i(e).open)}),function(){}}),a("tinymce.plugins.image.Plugin")()}();