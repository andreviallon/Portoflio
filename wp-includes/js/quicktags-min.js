function quicktags(t){return new QTags(t)}function edInsertContent(t,e){return QTags.insertContent(e)}function edButton(t,e,n,o,a){return QTags.addButton(t,e,n,o,a,"",-1)}var QTags,edCanvas,edButtons=[],edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};!function(){function t(t){return t=t||"",t=t.replace(/&([^#])(?![a-z1-4]{1,8};)/gi,"&#038;$1"),t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var e=function(t){var n,o,a,i;"undefined"!=typeof jQuery?jQuery(document).ready(t):(n=e,n.funcs=[],n.ready=function(){if(!n.isReady)for(n.isReady=!0,o=0;o<n.funcs.length;o++)n.funcs[o]()},n.isReady?t():n.funcs.push(t),n.eventAttached||(document.addEventListener?(a=function(){document.removeEventListener("DOMContentLoaded",a,!1),n.ready()},document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",n.ready,!1)):document.attachEvent&&(a=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),n.ready())},document.attachEvent("onreadystatechange",a),window.attachEvent("onload",n.ready),(i=function(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(i,50)}n.ready()})()),n.eventAttached=!0))},n=function(){var t=new Date,e;return e=function(t){var e=t.toString();return e.length<2&&(e="0"+e),e},t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"+00:00"}(),o;o=QTags=function(t){if("string"==typeof t)t={id:t};else if("object"!=typeof t)return!1;var n=this,a=t.id,i=document.getElementById(a),s="qt_"+a,u,l,c,r,d;if(!a||!i)return!1;n.name=s,n.id=a,n.canvas=i,n.settings=t,"content"!==a||"string"!=typeof adminpage||"post-new-php"!==adminpage&&"post-php"!==adminpage?c=s+"_toolbar":(edCanvas=i,c="ed_toolbar"),u=document.getElementById(c),u||(u=document.createElement("div"),u.id=c,u.className="quicktags-toolbar"),i.parentNode.insertBefore(u,i),n.toolbar=u,l=function(t){t=t||window.event;var e=t.target||t.srcElement,o=e.clientWidth||e.offsetWidth,u;o&&/ ed_button /.test(" "+e.className+" ")&&(n.canvas=i=document.getElementById(a),u=e.id.replace(s+"_",""),n.theButtons[u]&&n.theButtons[u].callback.call(n.theButtons[u],e,i,n))},d=function(){window.wpActiveEditor=a},r=document.getElementById("wp-"+a+"-wrap"),u.addEventListener?(u.addEventListener("click",l,!1),r&&r.addEventListener("click",d,!1)):u.attachEvent&&(u.attachEvent("onclick",l),r&&r.attachEvent("onclick",d)),n.getButton=function(t){return n.theButtons[t]},n.getButtonElement=function(t){return document.getElementById(s+"_"+t)},n.init=function(){e(function(){o._buttonsInit(a)})},n.remove=function(){delete o.instances[a],u&&u.parentNode&&u.parentNode.removeChild(u)},o.instances[a]=n,n.init()},o.instances={},o.getInstance=function(t){return o.instances[t]},o._buttonsInit=function(t){function e(t){var e,a,i,s,u,l,c,r,d,g=",strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,";l=n.instances[t],e=l.canvas,a=l.name,i=l.settings,u="",s={},d="",i.buttons&&(d=","+i.buttons+",");for(r in edButtons)edButtons[r]&&(c=edButtons[r].id,d&&-1!==g.indexOf(","+c+",")&&-1===d.indexOf(","+c+",")||edButtons[r].instance&&edButtons[r].instance!==t||(s[c]=edButtons[r],edButtons[r].html&&(u+=edButtons[r].html(a+"_"))));d&&-1!==d.indexOf(",dfw,")&&(s.dfw=new o.DFWButton,u+=s.dfw.html(a+"_")),"rtl"===document.getElementsByTagName("html")[0].dir&&(s.textdirection=new o.TextDirectionButton,u+=s.textdirection.html(a+"_")),l.toolbar.innerHTML=u,l.theButtons=s,"undefined"!=typeof jQuery&&jQuery(document).triggerHandler("quicktags-init",[l])}var n=this;if(t)e(t);else for(t in n.instances)e(t);n.buttonsInitDone=!0},o.addButton=function(t,e,n,a,i,s,u,l,c){var r;if(t&&e){if(u=u||0,a=a||"",c=c||{},"function"==typeof n)r=new o.Button(t,e,i,s,l,c),r.callback=n;else{if("string"!=typeof n)return;r=new o.TagButton(t,e,n,a,i,s,l,c)}if(-1===u)return r;if(u>0){for(;void 0!==edButtons[u];)u++;edButtons[u]=r}else edButtons[edButtons.length]=r;this.buttonsInitDone&&this._buttonsInit()}},o.insertContent=function(t){var e,n,o,a,i,s=document.getElementById(wpActiveEditor),u;return!!s&&(document.selection?(s.focus(),e=document.selection.createRange(),e.text=t,s.focus()):s.selectionStart||0===s.selectionStart?(i=s.value,n=s.selectionStart,o=s.selectionEnd,a=s.scrollTop,s.value=i.substring(0,n)+t+i.substring(o,i.length),s.selectionStart=n+t.length,s.selectionEnd=n+t.length,s.scrollTop=a,s.focus()):(s.value+=t,s.focus()),document.createEvent?(u=document.createEvent("HTMLEvents"),u.initEvent("change",!1,!0),s.dispatchEvent(u)):s.fireEvent&&s.fireEvent("onchange"),!0)},o.Button=function(t,e,n,o,a,i){this.id=t,this.display=e,this.access="",this.title=o||"",this.instance=a||"",this.attr=i||{}},o.Button.prototype.html=function(e){var n,o,a,i=this.title?' title="'+t(this.title)+'"':"",s=this.attr&&this.attr.ariaLabel?' aria-label="'+t(this.attr.ariaLabel)+'"':"",u=this.display?' value="'+t(this.display)+'"':"",l=this.id?' id="'+t(e+this.id)+'"':"",c=(a=window.wp)&&a.editor&&a.editor.dfw;return"fullscreen"===this.id?'<button type="button"'+l+' class="ed_button qt-dfw qt-fullscreen"'+i+s+"></button>":"dfw"===this.id?(n=c&&c.isActive()?"":' disabled="disabled"',o=c&&c.isOn()?" active":"",'<button type="button"'+l+' class="ed_button qt-dfw'+o+'"'+i+s+n+"></button>"):'<input type="button"'+l+' class="ed_button button button-small"'+i+s+u+" />"},o.Button.prototype.callback=function(){},o.TagButton=function(t,e,n,a,i,s,u,l){var c=this;o.Button.call(c,t,e,i,s,u,l),c.tagStart=n,c.tagEnd=a},o.TagButton.prototype=new o.Button,o.TagButton.prototype.openTag=function(t,e){e.openTags||(e.openTags=[]),this.tagEnd&&(e.openTags.push(this.id),t.value="/"+t.value,this.attr.ariaLabelClose&&t.setAttribute("aria-label",this.attr.ariaLabelClose))},o.TagButton.prototype.closeTag=function(t,e){var n=this.isOpen(e);!1!==n&&e.openTags.splice(n,1),t.value=this.display,this.attr.ariaLabel&&t.setAttribute("aria-label",this.attr.ariaLabel)},o.TagButton.prototype.isOpen=function(t){var e=this,n=0,o=!1;if(t.openTags)for(;!1===o&&n<t.openTags.length;)o=t.openTags[n]===e.id&&n,n++;else o=!1;return o},o.TagButton.prototype.callback=function(t,e,n){var o=this,a,i,s,u,l=e.value,c,r,d,g,f=l?o.tagEnd:"",p;document.selection?(e.focus(),g=document.selection.createRange(),g.text.length>0?o.tagEnd?g.text=o.tagStart+g.text+f:g.text=g.text+o.tagStart:o.tagEnd?!1===o.isOpen(n)?(g.text=o.tagStart,o.openTag(t,n)):(g.text=f,o.closeTag(t,n)):g.text=o.tagStart,e.focus()):e.selectionStart||0===e.selectionStart?(a=e.selectionStart,i=e.selectionEnd,a<i&&"\n"===l.charAt(i-1)&&(i-=1),s=i,u=e.scrollTop,c=l.substring(0,a),r=l.substring(i,l.length),d=l.substring(a,i),a!==i?o.tagEnd?(e.value=c+o.tagStart+d+f+r,s+=o.tagStart.length+f.length):(e.value=c+d+o.tagStart+r,s+=o.tagStart.length):o.tagEnd?!1===o.isOpen(n)?(e.value=c+o.tagStart+r,o.openTag(t,n),s=a+o.tagStart.length):(e.value=c+f+r,s=a+f.length,o.closeTag(t,n)):(e.value=c+o.tagStart+r,s=a+o.tagStart.length),e.selectionStart=s,e.selectionEnd=s,e.scrollTop=u,e.focus()):(f?!1!==o.isOpen(n)?(e.value+=o.tagStart,o.openTag(t,n)):(e.value+=f,o.closeTag(t,n)):e.value+=o.tagStart,e.focus()),document.createEvent?(p=document.createEvent("HTMLEvents"),p.initEvent("change",!1,!0),e.dispatchEvent(p)):e.fireEvent&&e.fireEvent("onchange")},o.SpellButton=function(){},o.CloseButton=function(){o.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)},o.CloseButton.prototype=new o.Button,o._close=function(t,e,n){var o,a,i=n.openTags;if(i)for(;i.length>0;)o=n.getButton(i[i.length-1]),a=document.getElementById(n.name+"_"+o.id),t?o.callback.call(o,a,e,n):o.closeTag(a,n)},o.CloseButton.prototype.callback=o._close,o.closeAllTags=function(t){var e=this.getInstance(t);e&&o._close("",e.canvas,e)},o.LinkButton=function(){var t={ariaLabel:quicktagsL10n.link};o.TagButton.call(this,"link","link","","</a>","","","",t)},o.LinkButton.prototype=new o.TagButton,o.LinkButton.prototype.callback=function(t,e,n,a){var i,s=this;if("undefined"!=typeof wpLink)return void wpLink.open(n.id);a||(a="http://"),!1===s.isOpen(n)?(i=prompt(quicktagsL10n.enterURL,a))&&(s.tagStart='<a href="'+i+'">',o.TagButton.prototype.callback.call(s,t,e,n)):o.TagButton.prototype.callback.call(s,t,e,n)},o.ImgButton=function(){var t={ariaLabel:quicktagsL10n.image};o.TagButton.call(this,"img","img","","","","","",t)},o.ImgButton.prototype=new o.TagButton,o.ImgButton.prototype.callback=function(t,e,n,a){a||(a="http://");var i=prompt(quicktagsL10n.enterImageURL,a),s;i&&(s=prompt(quicktagsL10n.enterImageDescription,""),this.tagStart='<img src="'+i+'" alt="'+s+'" />',o.TagButton.prototype.callback.call(this,t,e,n))},o.DFWButton=function(){o.Button.call(this,"dfw","","f",quicktagsL10n.dfw)},o.DFWButton.prototype=new o.Button,o.DFWButton.prototype.callback=function(){var t;(t=window.wp)&&t.editor&&t.editor.dfw&&window.wp.editor.dfw.toggle()},o.TextDirectionButton=function(){o.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)},o.TextDirectionButton.prototype=new o.Button,o.TextDirectionButton.prototype.callback=function(t,e){var n="rtl"===document.getElementsByTagName("html")[0].dir,o=e.style.direction;o||(o=n?"rtl":"ltr"),e.style.direction="rtl"===o?"ltr":"rtl",e.focus()},edButtons[10]=new o.TagButton("strong","b","<strong>","</strong>","","","",{ariaLabel:quicktagsL10n.strong,ariaLabelClose:quicktagsL10n.strongClose}),edButtons[20]=new o.TagButton("em","i","<em>","</em>","","","",{ariaLabel:quicktagsL10n.em,ariaLabelClose:quicktagsL10n.emClose}),edButtons[30]=new o.LinkButton,edButtons[40]=new o.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","","","",{ariaLabel:quicktagsL10n.blockquote,ariaLabelClose:quicktagsL10n.blockquoteClose}),edButtons[50]=new o.TagButton("del","del",'<del datetime="'+n+'">',"</del>","","","",{ariaLabel:quicktagsL10n.del,ariaLabelClose:quicktagsL10n.delClose}),edButtons[60]=new o.TagButton("ins","ins",'<ins datetime="'+n+'">',"</ins>","","","",{ariaLabel:quicktagsL10n.ins,ariaLabelClose:quicktagsL10n.insClose}),edButtons[70]=new o.ImgButton,edButtons[80]=new o.TagButton("ul","ul","<ul>\n","</ul>\n\n","","","",{ariaLabel:quicktagsL10n.ul,ariaLabelClose:quicktagsL10n.ulClose}),edButtons[90]=new o.TagButton("ol","ol","<ol>\n","</ol>\n\n","","","",{ariaLabel:quicktagsL10n.ol,ariaLabelClose:quicktagsL10n.olClose}),edButtons[100]=new o.TagButton("li","li","\t<li>","</li>\n","","","",{ariaLabel:quicktagsL10n.li,ariaLabelClose:quicktagsL10n.liClose}),edButtons[110]=new o.TagButton("code","code","<code>","</code>","","","",{ariaLabel:quicktagsL10n.code,ariaLabelClose:quicktagsL10n.codeClose}),edButtons[120]=new o.TagButton("more","more","<!--more-->\n\n","","","","",{ariaLabel:quicktagsL10n.more}),edButtons[140]=new o.CloseButton}();