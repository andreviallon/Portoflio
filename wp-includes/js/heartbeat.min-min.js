!function(e,t,n){var a=function(){function a(){var n,a,i,c;"string"==typeof t.pagenow&&(T.screenId=t.pagenow),"string"==typeof t.ajaxurl&&(T.url=t.ajaxurl),"object"==typeof t.heartbeatSettings&&(n=t.heartbeatSettings,!T.url&&n.ajaxurl&&(T.url=n.ajaxurl),n.interval&&(T.mainInterval=n.interval,T.mainInterval<15?T.mainInterval=15:T.mainInterval>120&&(T.mainInterval=120)),n.minimalInterval&&(n.minimalInterval=parseInt(n.minimalInterval,10),T.minimalInterval=n.minimalInterval>0&&n.minimalInterval<=600?1e3*n.minimalInterval:0),T.minimalInterval&&T.mainInterval<T.minimalInterval&&(T.mainInterval=T.minimalInterval),T.screenId||(T.screenId=n.screenId||"front"),"disable"===n.suspension&&(T.suspendEnabled=!1)),T.mainInterval=1e3*T.mainInterval,T.originalInterval=T.mainInterval,void 0!==document.hidden?(a="hidden",c="visibilitychange",i="visibilityState"):void 0!==document.msHidden?(a="msHidden",c="msvisibilitychange",i="msVisibilityState"):void 0!==document.webkitHidden&&(a="webkitHidden",c="webkitvisibilitychange",i="webkitVisibilityState"),a&&(document[a]&&(T.hasFocus=!1),A.on(c+".wp-heartbeat",function(){"hidden"===document[i]?(d(),t.clearInterval(T.checkFocusTimer)):(v(),document.hasFocus&&(T.checkFocusTimer=t.setInterval(o,1e4)))})),document.hasFocus&&(T.checkFocusTimer=t.setInterval(o,1e4)),e(t).on("unload.wp-heartbeat",function(){T.suspend=!0,T.xhr&&4!==T.xhr.readyState&&T.xhr.abort()}),t.setInterval(h,3e4),A.ready(function(){T.lastTick=r(),l()})}function r(){return(new Date).getTime()}function i(e){var n,a=e.src;if(a&&/^https?:\/\//.test(a)&&(n=t.location.origin?t.location.origin:t.location.protocol+"//"+t.location.host,0!==a.indexOf(n)))return!1;try{if(e.contentWindow.document)return!0}catch(e){}return!1}function o(){T.hasFocus&&!document.hasFocus()?d():!T.hasFocus&&document.hasFocus()&&v()}function c(e,t){var n;if(e){switch(e){case"abort":break;case"timeout":n=!0;break;case"error":if(503===t&&T.hasConnected){n=!0;break}case"parsererror":case"empty":case"unknown":T.errorcount++,T.errorcount>2&&T.hasConnected&&(n=!0)}n&&!b()&&(T.connectionError=!0,A.trigger("heartbeat-connection-lost",[e,t]),wp.hooks.doAction("heartbeat.connection-lost",e,t))}}function s(){T.hasConnected=!0,b()&&(T.errorcount=0,T.connectionError=!1,A.trigger("heartbeat-connection-restored"),wp.hooks.doAction("heartbeat.connection-restored"))}function u(){var n,a;T.connecting||T.suspend||(T.lastTick=r(),a=e.extend({},T.queue),T.queue={},A.trigger("heartbeat-send",[a]),wp.hooks.doAction("heartbeat.send",a),n={data:a,interval:T.tempInterval?T.tempInterval/1e3:T.mainInterval/1e3,_nonce:"object"==typeof t.heartbeatSettings?t.heartbeatSettings.nonce:"",action:"heartbeat",screen_id:T.screenId,has_focus:T.hasFocus},"customize"===T.screenId&&(n.wp_customize="on"),T.connecting=!0,T.xhr=e.ajax({url:T.url,type:"post",timeout:3e4,data:n,dataType:"json"}).always(function(){T.connecting=!1,l()}).done(function(e,n,a){var r;return e?(s(),e.nonces_expired&&(A.trigger("heartbeat-nonces-expired"),wp.hooks.doAction("heartbeat.nonces-expired")),e.heartbeat_interval&&(r=e.heartbeat_interval,delete e.heartbeat_interval),e.heartbeat_nonce&&"object"==typeof t.heartbeatSettings&&(t.heartbeatSettings.nonce=e.heartbeat_nonce,delete e.heartbeat_nonce),e.rest_nonce&&"object"==typeof t.wpApiSettings&&(t.wpApiSettings.nonce=e.rest_nonce),A.trigger("heartbeat-tick",[e,n,a]),wp.hooks.doAction("heartbeat.tick",e,n,a),void(r&&w(r))):void c("empty")}).fail(function(e,t,n){c(t||"unknown",e.status),A.trigger("heartbeat-error",[e,t,n]),wp.hooks.doAction("heartbeat.error",e,t,n)}))}function l(){var e=r()-T.lastTick,n=T.mainInterval;T.suspend||(T.hasFocus?T.countdown>0&&T.tempInterval&&(n=T.tempInterval,T.countdown--,T.countdown<1&&(T.tempInterval=0)):n=12e4,T.minimalInterval&&n<T.minimalInterval&&(n=T.minimalInterval),t.clearTimeout(T.beatTimer),e<n?T.beatTimer=t.setTimeout(function(){u()},n-e):u())}function d(){T.hasFocus=!1}function v(){T.userActivity=r(),T.suspend=!1,T.hasFocus||(T.hasFocus=!0,l())}function m(){T.userActivityEvents=!1,A.off(".wp-heartbeat-active"),e("iframe").each(function(t,n){i(n)&&e(n.contentWindow).off(".wp-heartbeat-active")}),v()}function h(){var t=T.userActivity?r()-T.userActivity:0;t>3e5&&T.hasFocus&&d(),(T.suspendEnabled&&t>6e5||t>36e5)&&(T.suspend=!0),T.userActivityEvents||(A.on("mouseover.wp-heartbeat-active keyup.wp-heartbeat-active touchend.wp-heartbeat-active",function(){m()}),e("iframe").each(function(t,n){i(n)&&e(n.contentWindow).on("mouseover.wp-heartbeat-active keyup.wp-heartbeat-active touchend.wp-heartbeat-active",function(){m()})}),T.userActivityEvents=!0)}function p(){return T.hasFocus}function b(){return T.connectionError}function I(){T.lastTick=0,l()}function f(){T.suspendEnabled=!1}function w(e,t){var n,a=T.tempInterval?T.tempInterval:T.mainInterval;if(e){switch(e){case"fast":case 5:n=5e3;break;case 15:n=15e3;break;case 30:n=3e4;break;case 60:n=6e4;break;case 120:n=12e4;break;case"long-polling":return T.mainInterval=0,0;default:n=T.originalInterval}T.minimalInterval&&n<T.minimalInterval&&(n=T.minimalInterval),5e3===n?(t=(t=parseInt(t,10)||30)<1||t>30?30:t,T.countdown=t,T.tempInterval=n):(T.countdown=0,T.tempInterval=0,T.mainInterval=n),n!==a&&l()}return T.tempInterval?T.tempInterval/1e3:T.mainInterval/1e3}function g(e,t,n){return!(!e||n&&this.isQueued(e)||(T.queue[e]=t,0))}function k(e){if(e)return T.queue.hasOwnProperty(e)}function y(e){e&&delete T.queue[e]}function F(e){if(e)return this.isQueued(e)?T.queue[e]:n}var A=e(document),T={suspend:!1,suspendEnabled:!0,screenId:"",url:"",lastTick:0,queue:{},mainInterval:60,tempInterval:0,originalInterval:0,minimalInterval:0,countdown:0,connecting:!1,connectionError:!1,errorcount:0,hasConnected:!1,hasFocus:!0,userActivity:0,userActivityEvents:!1,checkFocusTimer:0,beatTimer:0};return a(),{hasFocus:p,connectNow:I,disableSuspend:f,interval:w,hasConnectionError:b,enqueue:g,dequeue:y,isQueued:k,getQueuedItem:F}};t.wp=t.wp||{},t.wp.heartbeat=new a}(jQuery,window);