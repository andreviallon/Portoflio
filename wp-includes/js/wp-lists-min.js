!function(e){var t={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"},n;n={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:"#ffff33",delColor:"#faafaa",dimAddColor:"#ffff33",dimDelColor:"#ff3333",confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(t,n){var i=wpAjax.unserialize(t.attr("href")),o=e("#"+n.element);return n.nonce||i._ajax_nonce||o.find('input[name="_ajax_nonce"]').val()||i._wpnonce||o.find('input[name="_wpnonce"]').val()||0},parseData:function(t,n){var i=[],o;try{(o=(o=e(t).data("wp-lists")||"").match(new RegExp(n+":[\\S]+")))&&(i=o[0].split(":"))}catch(e){}return i},pre:function(t,n,i){var o,s,a;return n=e.extend({},this.wpList.settings,{element:null,nonce:0,target:t.get(0)},n||{}),!(e.isFunction(n.confirm)&&(o=e("#"+n.element),"add"!==i&&(s=o.css("backgroundColor"),o.css("backgroundColor","#ff9966")),a=n.confirm.call(this,t,n,i,s),"add"!==i&&o.css("backgroundColor",s),!a))&&n},ajaxAdd:function(t,i){var o=this,s=e(t),a=n.parseData(s,"add"),l,r,d,c;return i=i||{},(i=n.pre.call(o,s,i,"add")).element=a[2]||s.prop("id")||i.element||null,i.addColor=a[3]?"#"+a[3]:i.addColor,!!i&&(s.is('[id="'+i.element+'-submit"]')?!i.element||(i.action="add-"+i.what,i.nonce=n.nonce(s,i),!!wpAjax.validateForm("#"+i.element)&&(i.data=e.param(e.extend({_ajax_nonce:i.nonce,action:i.action},wpAjax.unserialize(a[4]||""))),l=e("#"+i.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]'),(r=e.isFunction(l.fieldSerialize)?l.fieldSerialize():l.serialize())&&(i.data+="&"+r),!(!e.isFunction(i.addBefore)||(i=i.addBefore(i)))||(!i.data.match(/_ajax_nonce=[a-f0-9]+/)||(i.success=function(t){return d=wpAjax.parseAjaxResponse(t,i.response,i.element),c=t,!(!d||d.errors)&&(!0===d||(e.each(d.responses,function(){n.add.call(o,this.data,e.extend({},i,{position:this.position||0,id:this.id||0,oldId:this.oldId||null}))}),o.wpList.recolor(),e(o).trigger("wpListAddEnd",[i,o.wpList]),void n.clear.call(o,"#"+i.element)))},i.complete=function(t,n){e.isFunction(i.addAfter)&&i.addAfter(c,e.extend({xml:t,status:n,parsed:d},i))},e.ajax(i),!1)))):!n.add.call(o,s,i))},ajaxDel:function(t,i){var o=this,s=e(t),a=n.parseData(s,"delete"),l,r,d;return i=i||{},(i=n.pre.call(o,s,i,"delete")).element=a[2]||i.element||null,i.delColor=a[3]?"#"+a[3]:i.delColor,!(!i||!i.element)&&(i.action="delete-"+i.what,i.nonce=n.nonce(s,i),i.data=e.extend({_ajax_nonce:i.nonce,action:i.action,id:i.element.split("-").pop()},wpAjax.unserialize(a[4]||"")),!(!e.isFunction(i.delBefore)||(i=i.delBefore(i,o)))||(!i.data._ajax_nonce||(l=e("#"+i.element),"none"!==i.delColor?l.css("backgroundColor",i.delColor).fadeOut(350,function(){o.wpList.recolor(),e(o).trigger("wpListDelEnd",[i,o.wpList])}):(o.wpList.recolor(),e(o).trigger("wpListDelEnd",[i,o.wpList])),i.success=function(t){if(r=wpAjax.parseAjaxResponse(t,i.response,i.element),d=t,!r||r.errors)return l.stop().stop().css("backgroundColor","#faa").show().queue(function(){o.wpList.recolor(),e(this).dequeue()}),!1},i.complete=function(t,n){e.isFunction(i.delAfter)&&l.queue(function(){i.delAfter(d,e.extend({xml:t,status:n,parsed:r},i))}).dequeue()},e.ajax(i),!1)))},ajaxDim:function(t,i){var o=this,s=e(t),a=n.parseData(s,"dim"),l,r,d,c,u,p;return"none"!==s.parent().css("display")&&(i=i||{},(i=n.pre.call(o,s,i,"dim")).element=a[2]||i.element||null,i.dimClass=a[3]||i.dimClass||null,i.dimAddColor=a[4]?"#"+a[4]:i.dimAddColor,i.dimDelColor=a[5]?"#"+a[5]:i.dimDelColor,!(i&&i.element&&i.dimClass)||(i.action="dim-"+i.what,i.nonce=n.nonce(s,i),i.data=e.extend({_ajax_nonce:i.nonce,action:i.action,id:i.element.split("-").pop(),dimClass:i.dimClass},wpAjax.unserialize(a[6]||"")),!(!e.isFunction(i.dimBefore)||(i=i.dimBefore(i)))||(l=e("#"+i.element),r=l.toggleClass(i.dimClass).is("."+i.dimClass),d=n.getColor(l),c=r?i.dimAddColor:i.dimDelColor,l.toggleClass(i.dimClass),"none"!==c?l.animate({backgroundColor:c},"fast").queue(function(){l.toggleClass(i.dimClass),e(this).dequeue()}).animate({backgroundColor:d},{complete:function(){e(this).css("backgroundColor",""),e(o).trigger("wpListDimEnd",[i,o.wpList])}}):e(o).trigger("wpListDimEnd",[i,o.wpList]),!i.data._ajax_nonce||(i.success=function(t){if(u=wpAjax.parseAjaxResponse(t,i.response,i.element),p=t,!0===u)return!0;if(!u||u.errors)return l.stop().stop().css("backgroundColor","#ff3333")[r?"removeClass":"addClass"](i.dimClass).show().queue(function(){o.wpList.recolor(),e(this).dequeue()}),!1;if(void 0!==u.responses[0].supplemental.comment_link){var n=s.find(".submitted-on"),a=n.find("a");""!==u.responses[0].supplemental.comment_link?n.html(e("<a></a>").text(n.text()).prop("href",u.responses[0].supplemental.comment_link)):a.length&&n.text(a.text())}},i.complete=function(t,n){e.isFunction(i.dimAfter)&&l.queue(function(){i.dimAfter(p,e.extend({xml:t,status:n,parsed:u},i))}).dequeue()},e.ajax(i),!1))))},getColor:function(t){return e(t).css("backgroundColor")||"#ffffff"},add:function(t,i){var o=e(this),s=e(t),a=!1,l,r;return"string"==typeof i&&(i={what:i}),i=e.extend({position:0,id:0,oldId:null},this.wpList.settings,i),!(!s.length||!i.what)&&(i.oldId&&(a=e("#"+i.what+"-"+i.oldId)),!i.id||i.id===i.oldId&&a&&a.length||e("#"+i.what+"-"+i.id).remove(),a&&a.length?(a.before(s),a.remove()):isNaN(i.position)?(l="after","-"===i.position.substr(0,1)&&(i.position=i.position.substr(1),l="before"),1===(r=o.find("#"+i.position)).length?r[l](s):o.append(s)):"comment"===i.what&&0!==e("#"+i.element).length||(i.position<0?o.prepend(s):o.append(s)),i.alt&&s.toggleClass(i.alt,(o.children(":visible").index(s[0])+i.altOffset)%2),"none"!==i.addColor&&s.css("backgroundColor",i.addColor).animate({backgroundColor:n.getColor(s)},{complete:function(){e(this).css("backgroundColor","")}}),o.each(function(e,t){t.wpList.process(s)}),s)},clear:function(t){var n=this,i=e(t),o,s;this.wpList&&i.parents("#"+this.id).length||i.find(":input").each(function(t,n){e(n).parents(".form-no-clear").length||(o=n.type.toLowerCase(),s=n.tagName.toLowerCase(),"text"===o||"password"===o||"textarea"===s?n.value="":"checkbox"===o||"radio"===o?n.checked=!1:"select"===s&&(n.selectedIndex=null))})},process:function(t){var n=this,i=e(t||document);i.on("submit",'form[data-wp-lists^="add:'+n.id+':"]',function(){return n.wpList.add(this)}),i.on("click",'a[data-wp-lists^="add:'+n.id+':"], input[data-wp-lists^="add:'+n.id+':"]',function(){return n.wpList.add(this)}),i.on("click",'[data-wp-lists^="delete:'+n.id+':"]',function(){return n.wpList.del(this)}),i.on("click",'[data-wp-lists^="dim:'+n.id+':"]',function(){return n.wpList.dim(this)})},recolor:function(){var t=this,n=[":even",":odd"],i;this.wpList.settings.alt&&((i=e(".list-item:visible",this)).length||(i=e(this).children(":visible")),this.wpList.settings.altOffset%2&&n.reverse(),i.filter(n[0]).addClass(this.wpList.settings.alt).end(),i.filter(n[1]).removeClass(this.wpList.settings.alt))},init:function(){var e=this;e.wpList.process=function(t){e.each(function(){this.wpList.process(t)})},e.wpList.recolor=function(){e.each(function(){this.wpList.recolor()})}}},e.fn.wpList=function(i){return this.each(function(o,s){s.wpList={settings:e.extend({},n.settings,{what:n.parseData(s,"list")[1]||""},i)},e.each(t,function(e,t){s.wpList[e]=function(e,i){return n[t].call(s,e,i)}})}),n.init.call(this),this.wpList.process(),this}}(jQuery);